2020-12-03 07:19:50,742 [main] DEBUG ipc.Server (Server.java:registerProtocolEngine(292)) - rpcKind=RPC_PROTOCOL_BUFFER, rpcRequestWrapperClass=class org.apache.hadoop.ipc.ProtobufRpcEngine$RpcProtobufRequest, rpcInvoker=org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker@bcec361
2020-12-03 07:19:50,756 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(84)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 500, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2020-12-03 07:19:50,757 [main] DEBUG ipc.Server (Server.java:getAuthMethods(3145)) - TOKEN authentication enabled for secret manager
2020-12-03 07:19:50,757 [main] DEBUG ipc.Server (Server.java:getAuthMethods(3152)) - Server accepts auth methods:[TOKEN, KERBEROS]
2020-12-03 07:19:50,763 [main] DEBUG security.SaslRpcServer (SaslRpcServer.java:<init>(111)) - Kerberos principal name is root
2020-12-03 07:19:50,776 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1219)) - Starting Socket Reader #1 for port 0
2020-12-03 07:19:50,829 [Listener at 0.0.0.0/37295] DEBUG ipc.Server (RPC.java:registerProtocolAndImpl(974)) - RpcKind = RPC_PROTOCOL_BUFFER Protocol Name = org.apache.hadoop.ipc.ProtocolMetaInfoPB version=1 ProtocolImpl=org.apache.hadoop.ipc.protobuf.ProtocolInfoProtos$ProtocolInfoService$2 protocolClass=org.apache.hadoop.ipc.ProtocolMetaInfoPB
2020-12-03 07:19:50,837 [Listener at 0.0.0.0/37295] DEBUG ipc.Server (RPC.java:registerProtocolAndImpl(974)) - RpcKind = RPC_PROTOCOL_BUFFER Protocol Name = org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol version=1 ProtocolImpl=org.apache.hadoop.hdfs.protocol.proto.ClientDatanodeProtocolProtos$ClientDatanodeProtocolService$2 protocolClass=org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB
2020-12-03 07:19:50,840 [IPC Server Responder] INFO  ipc.Server (Server.java:run(1460)) - IPC Server Responder: starting
2020-12-03 07:19:50,840 [IPC Server listener on 0] INFO  ipc.Server (Server.java:run(1298)) - IPC Server listener on 0: starting
2020-12-03 07:19:50,842 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2869)) - IPC Server handler 0 on default port 37295: starting
2020-12-03 07:19:50,842 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2869)) - IPC Server handler 1 on default port 37295: starting
2020-12-03 07:19:50,843 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2869)) - IPC Server handler 3 on default port 37295: starting
2020-12-03 07:19:50,844 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2869)) - IPC Server handler 2 on default port 37295: starting
2020-12-03 07:19:50,845 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2869)) - IPC Server handler 4 on default port 37295: starting
2020-12-03 07:19:50,891 [Listener at 0.0.0.0/37295] DEBUG ipc.Server (Server.java:registerProtocolEngine(292)) - rpcKind=RPC_WRITABLE, rpcRequestWrapperClass=class org.apache.hadoop.ipc.WritableRpcEngine$Invocation, rpcInvoker=org.apache.hadoop.ipc.WritableRpcEngine$Server$WritableRpcInvoker@55f616cf
2020-12-03 07:19:50,905 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@1bb266b3
2020-12-03 07:19:50,957 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@1eb5174b
2020-12-03 07:19:51,032 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,033 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,051 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52688; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,162 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,166 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,240 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,250 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52688
2020-12-03 07:19:51,250 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52688 Wrote 194 bytes.
2020-12-03 07:19:51,256 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,269 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,271 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,287 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,288 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,288 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,292 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"7YjXGobPzDZF854yHEA6qj2utQm5CO8bDxJKF95s\",nc=00000001,cnonce=\"/O9G9Zn+2g0MsZuj9v5YwW3r+3gGKrHWrlh/9FKc\",digest-uri=\"/default\",maxbuf=65536,response=5e4ad7bedba2d782ac867f9d90323695,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,294 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,294 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,297 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,300 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,300 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,301 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,302 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,302 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,302 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52688
2020-12-03 07:19:51,303 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52688 Wrote 64 bytes.
2020-12-03 07:19:51,304 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,312 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,314 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,316 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,321 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,321 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #0
2020-12-03 07:19:51,322 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#0 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52688 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,324 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,391 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,419 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#0 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52688
2020-12-03 07:19:51,420 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#0 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52688 Wrote 43 bytes.
2020-12-03 07:19:51,424 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #0
2020-12-03 07:19:51,425 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,425 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,425 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52688. Number of active connections: 0
2020-12-03 07:19:51,427 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@1eb5174b
2020-12-03 07:19:51,428 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@1eb5174b
2020-12-03 07:19:51,428 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@1eb5174b
2020-12-03 07:19:51,428 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,430 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:51,433 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@663c9e7a
2020-12-03 07:19:51,434 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,434 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,435 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52690; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,436 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,437 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,437 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,438 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52690
2020-12-03 07:19:51,438 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52690 Wrote 194 bytes.
2020-12-03 07:19:51,438 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,439 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,440 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,441 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,441 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,441 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,443 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"hjFq9iW0yLABuw9r6Hw0Lh6h5eO8nElFT2qa1AeN\",nc=00000001,cnonce=\"8wXqzLZhQoXSSMwwj7LCmXYieFMLOdH7IduBira4\",digest-uri=\"/default\",maxbuf=65536,response=9f85468fe1e3e0320ae07726af95e444,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,464 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,464 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,466 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,467 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,467 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,468 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,472 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,472 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,473 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52690
2020-12-03 07:19:51,473 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52690 Wrote 64 bytes.
2020-12-03 07:19:51,476 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,484 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,484 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #1 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,485 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,486 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,486 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #1
2020-12-03 07:19:51,488 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#1 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52690 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,488 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,490 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,491 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#1 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52690
2020-12-03 07:19:51,491 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#1 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52690 Wrote 43 bytes.
2020-12-03 07:19:51,491 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #1
2020-12-03 07:19:51,492 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,492 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52690. Number of active connections: 0
2020-12-03 07:19:51,492 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@663c9e7a
2020-12-03 07:19:51,493 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@663c9e7a
2020-12-03 07:19:51,493 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@663c9e7a
2020-12-03 07:19:51,494 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,495 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:51,497 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@33065d67
2020-12-03 07:19:51,497 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,498 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,498 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52692; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,492 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,500 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,501 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,501 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,502 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52692
2020-12-03 07:19:51,502 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52692 Wrote 194 bytes.
2020-12-03 07:19:51,502 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,503 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,504 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,505 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,505 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,506 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,507 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"4MsAVlTRl5HEzwqZ0+mvTe1PfN9aVQOkW/0G/2qZ\",nc=00000001,cnonce=\"4Cl56z2UXHljSZKgV+vySYDBEBqgoWqE0Wp1CI65\",digest-uri=\"/default\",maxbuf=65536,response=00c4bb2238e8cff480c7182181002c2e,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,514 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,514 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,516 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,517 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,517 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,517 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,518 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,518 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,518 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52692
2020-12-03 07:19:51,519 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52692 Wrote 64 bytes.
2020-12-03 07:19:51,523 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,524 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,524 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #2 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,525 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,526 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,526 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #2
2020-12-03 07:19:51,527 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#2 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52692 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,527 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,529 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,529 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#2 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52692
2020-12-03 07:19:51,530 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#2 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52692 Wrote 43 bytes.
2020-12-03 07:19:51,530 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #2
2020-12-03 07:19:51,530 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,530 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@33065d67
2020-12-03 07:19:51,531 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@33065d67
2020-12-03 07:19:51,531 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@33065d67
2020-12-03 07:19:51,531 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,530 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,531 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52692. Number of active connections: 0
2020-12-03 07:19:51,532 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:51,535 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4c60d6e9
2020-12-03 07:19:51,535 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,536 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,537 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,540 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52694; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,541 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,541 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,542 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52694
2020-12-03 07:19:51,542 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52694 Wrote 194 bytes.
2020-12-03 07:19:51,543 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,543 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,544 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,545 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,545 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,545 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,547 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"cHKeUhDJQTcRnb5bl6LkHnFlxSqkNt5M9lorZ+oZ\",nc=00000001,cnonce=\"QNrnygSbMPlfryKkBSo34abQPxQN44IfczHN7ynv\",digest-uri=\"/default\",maxbuf=65536,response=4dc502100fe529d12948b682b3a7a322,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,550 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,551 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,552 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,553 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,554 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,554 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,555 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,555 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,556 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52694
2020-12-03 07:19:51,556 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52694 Wrote 64 bytes.
2020-12-03 07:19:51,561 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,568 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #3 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,568 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,569 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,569 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,570 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #3
2020-12-03 07:19:51,570 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#3 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52694 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,570 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,572 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,572 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#3 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52694
2020-12-03 07:19:51,573 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#3 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52694 Wrote 43 bytes.
2020-12-03 07:19:51,573 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #3
2020-12-03 07:19:51,574 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,574 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,574 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52694. Number of active connections: 0
2020-12-03 07:19:51,574 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4c60d6e9
2020-12-03 07:19:51,575 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4c60d6e9
2020-12-03 07:19:51,575 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4c60d6e9
2020-12-03 07:19:51,576 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,577 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:51,578 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@5f049ea1
2020-12-03 07:19:51,579 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,579 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,580 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52696; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,581 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,581 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,582 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,582 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52696
2020-12-03 07:19:51,582 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52696 Wrote 194 bytes.
2020-12-03 07:19:51,583 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,583 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,584 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,585 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,585 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,585 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,587 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"6fqEQksiGyg7w2D5gNTyAty5suqCFSp14c/omNkO\",nc=00000001,cnonce=\"jzR0Le/Xp8JpMCkwanaVB/9dSn0uRGgXJFzjKqvb\",digest-uri=\"/default\",maxbuf=65536,response=470d110378b7df518508226c3bbe7840,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,588 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,588 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,589 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,590 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,591 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,591 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,592 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,592 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,592 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52696
2020-12-03 07:19:51,593 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52696 Wrote 64 bytes.
2020-12-03 07:19:51,596 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,597 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #4 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,597 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,598 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,598 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,598 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #4
2020-12-03 07:19:51,599 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#4 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52696 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,599 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,601 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,601 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#4 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52696
2020-12-03 07:19:51,602 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#4 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52696 Wrote 43 bytes.
2020-12-03 07:19:51,602 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #4
2020-12-03 07:19:51,603 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,603 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,603 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52696. Number of active connections: 0
2020-12-03 07:19:51,603 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@5f049ea1
2020-12-03 07:19:51,606 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@5f049ea1
2020-12-03 07:19:51,607 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@5f049ea1
2020-12-03 07:19:51,607 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,608 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:51,610 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@2cb4893b
2020-12-03 07:19:51,611 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,611 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,612 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52698; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,612 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,616 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,616 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,617 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52698
2020-12-03 07:19:51,617 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52698 Wrote 194 bytes.
2020-12-03 07:19:51,617 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,623 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,624 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,624 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,624 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,624 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,625 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"eJ8/UtUr8+FVOZFwFOjk0s/j/LJzAS9OD0ATDJ0Q\",nc=00000001,cnonce=\"FDnylQ975a+IBY7/RYZmWMYwqh6ogbTR7IjgiamT\",digest-uri=\"/default\",maxbuf=65536,response=674e4dac9ece140e6dbb55d6abc7957d,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,626 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,626 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,628 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,628 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,629 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,629 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,630 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,630 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,630 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52698
2020-12-03 07:19:51,630 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52698 Wrote 64 bytes.
2020-12-03 07:19:51,631 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,632 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,632 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #5 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,632 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,633 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,633 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #5
2020-12-03 07:19:51,636 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#5 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52698 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,636 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,637 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,637 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#5 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52698
2020-12-03 07:19:51,638 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#5 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52698 Wrote 43 bytes.
2020-12-03 07:19:51,638 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #5
2020-12-03 07:19:51,638 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,638 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@2cb4893b
2020-12-03 07:19:51,638 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,639 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@2cb4893b
2020-12-03 07:19:51,639 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@2cb4893b
2020-12-03 07:19:51,639 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,640 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52698. Number of active connections: 0
2020-12-03 07:19:51,641 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:51,647 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@48bb62
2020-12-03 07:19:51,648 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,648 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,649 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52700; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,650 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,650 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,650 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,651 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52700
2020-12-03 07:19:51,651 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52700 Wrote 194 bytes.
2020-12-03 07:19:51,651 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,652 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,653 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,654 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,654 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,654 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,655 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"EkSeWyEOfnPI2jWNnXSkcyVvcGN3SfipLFgG2qG+\",nc=00000001,cnonce=\"BXhTW9qOTdmjQOx35KSqBh2DL2mpBQGP414aoB9Z\",digest-uri=\"/default\",maxbuf=65536,response=4c1f9f5bce5c6ab74da384306c0db773,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,657 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,658 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,659 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,660 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,661 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,661 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,661 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,662 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,662 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52700
2020-12-03 07:19:51,662 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52700 Wrote 64 bytes.
2020-12-03 07:19:51,663 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,664 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,664 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #6 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,665 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,666 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,666 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #6
2020-12-03 07:19:51,668 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#6 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52700 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,668 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,669 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,669 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#6 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52700
2020-12-03 07:19:51,669 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#6 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52700 Wrote 43 bytes.
2020-12-03 07:19:51,670 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #6
2020-12-03 07:19:51,670 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,670 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@48bb62
2020-12-03 07:19:51,670 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,670 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52700. Number of active connections: 0
2020-12-03 07:19:51,670 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@48bb62
2020-12-03 07:19:51,671 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@48bb62
2020-12-03 07:19:51,671 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,672 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:51,673 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@7ce69770
2020-12-03 07:19:51,674 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,674 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,675 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,676 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52702; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,676 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,677 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,677 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52702
2020-12-03 07:19:51,677 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52702 Wrote 194 bytes.
2020-12-03 07:19:51,678 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,678 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,679 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,680 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,680 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,680 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,684 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"F5TvI/oMLA6tUTu2ZHt70fdzxzIRFSeuyYW0iuxP\",nc=00000001,cnonce=\"LPxOpm6ZbCaZYfPQG8ZsIgORW4omKIfQlSzozIiY\",digest-uri=\"/default\",maxbuf=65536,response=63729f3dd3bd55377efc0789ebcc0ea3,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,687 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,687 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,688 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,689 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,690 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,690 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,691 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,691 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,691 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52702
2020-12-03 07:19:51,691 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52702 Wrote 64 bytes.
2020-12-03 07:19:51,694 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,698 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,699 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #7 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,699 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,700 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,700 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #7
2020-12-03 07:19:51,704 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#7 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52702 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,704 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,705 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,705 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#7 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52702
2020-12-03 07:19:51,705 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#7 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52702 Wrote 43 bytes.
2020-12-03 07:19:51,706 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #7
2020-12-03 07:19:51,706 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,706 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@7ce69770
2020-12-03 07:19:51,707 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52702. Number of active connections: 0
2020-12-03 07:19:51,706 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,707 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@7ce69770
2020-12-03 07:19:51,708 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@7ce69770
2020-12-03 07:19:51,709 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,710 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:51,716 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4d1c005e
2020-12-03 07:19:51,717 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,718 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,718 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52704; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,719 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,720 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,720 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,721 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52704
2020-12-03 07:19:51,721 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52704 Wrote 194 bytes.
2020-12-03 07:19:51,721 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,722 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,723 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,723 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,723 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,723 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,725 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"5e35eILzy3G4vlwOIPDVno4ExMITas1l1SnYaIFT\",nc=00000001,cnonce=\"4Ts1qSqqi8H3e6kVuguAZgxuqr5OESHmMMlvuy3M\",digest-uri=\"/default\",maxbuf=65536,response=cc3a0a5b1b89366f687178e027059e83,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,728 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,728 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,730 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,730 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,731 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,731 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,731 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,732 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,732 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52704
2020-12-03 07:19:51,732 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52704 Wrote 64 bytes.
2020-12-03 07:19:51,733 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,737 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #8 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,738 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,738 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,739 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #8
2020-12-03 07:19:51,739 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#8 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52704 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,739 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,740 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,741 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#8 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52704
2020-12-03 07:19:51,742 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#8 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52704 Wrote 43 bytes.
2020-12-03 07:19:51,740 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,742 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #8
2020-12-03 07:19:51,742 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,743 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,743 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4d1c005e
2020-12-03 07:19:51,743 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4d1c005e
2020-12-03 07:19:51,743 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4d1c005e
2020-12-03 07:19:51,744 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,745 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:51,747 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@303cf2ba
2020-12-03 07:19:51,748 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,748 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,749 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52706; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,745 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52704. Number of active connections: 0
2020-12-03 07:19:51,750 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,751 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,751 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,756 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52706
2020-12-03 07:19:51,756 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52706 Wrote 194 bytes.
2020-12-03 07:19:51,757 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,757 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,758 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,758 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,759 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,759 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,760 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"cUaZvZ/Jf9PVYODWC6XYuKQF6cPCBuEMGB5gN4kU\",nc=00000001,cnonce=\"q2j4wYJlRh7ZBdTDQUxW8yK3dfCzwf1FJvyPqDSX\",digest-uri=\"/default\",maxbuf=65536,response=7c77ba6d0fe85cbd4418888b23a38f01,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,761 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,761 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,762 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,763 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,769 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,770 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,771 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,771 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,772 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52706
2020-12-03 07:19:51,772 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52706 Wrote 64 bytes.
2020-12-03 07:19:51,776 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,777 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,777 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #9 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,778 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,778 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,779 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #9
2020-12-03 07:19:51,779 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#9 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52706 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,779 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,780 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,780 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#9 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52706
2020-12-03 07:19:51,781 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#9 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52706 Wrote 43 bytes.
2020-12-03 07:19:51,781 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #9
2020-12-03 07:19:51,781 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,781 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,781 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52706. Number of active connections: 0
2020-12-03 07:19:51,782 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@303cf2ba
2020-12-03 07:19:51,782 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@303cf2ba
2020-12-03 07:19:51,782 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@303cf2ba
2020-12-03 07:19:51,783 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,783 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:51,785 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@23e84203
2020-12-03 07:19:51,786 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,786 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,787 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,788 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52708; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,788 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,788 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,789 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52708
2020-12-03 07:19:51,789 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52708 Wrote 194 bytes.
2020-12-03 07:19:51,792 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,792 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,793 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,793 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,793 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,794 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,795 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"WUJwkie2J2+WOP9DdztOrOL5eXypVcTO8/mlln6z\",nc=00000001,cnonce=\"QxZbWvCORW1HnA9f7Frh+S5OtgFHcLAzkHk15em9\",digest-uri=\"/default\",maxbuf=65536,response=716a5bd93d6f594ca331b45d9e81a902,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,795 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,795 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,796 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,797 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,797 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,797 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,798 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,798 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,798 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52708
2020-12-03 07:19:51,798 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52708 Wrote 64 bytes.
2020-12-03 07:19:51,800 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,801 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,801 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #10 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,801 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,802 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,802 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #10
2020-12-03 07:19:51,802 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#10 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52708 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,803 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,804 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,804 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#10 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52708
2020-12-03 07:19:51,804 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#10 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52708 Wrote 43 bytes.
2020-12-03 07:19:51,804 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #10
2020-12-03 07:19:51,805 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,805 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52708. Number of active connections: 0
2020-12-03 07:19:51,805 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,808 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@23e84203
2020-12-03 07:19:51,808 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@23e84203
2020-12-03 07:19:51,808 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@23e84203
2020-12-03 07:19:51,808 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,809 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:51,811 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@548a24a
2020-12-03 07:19:51,812 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,812 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,813 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52710; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,813 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,814 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,814 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,815 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52710
2020-12-03 07:19:51,815 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52710 Wrote 194 bytes.
2020-12-03 07:19:51,816 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,817 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,818 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,818 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,818 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,819 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,820 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"882pg2cd1vYP5AcIqRUajwxuUxwVTM7E9iIFyQjJ\",nc=00000001,cnonce=\"Doz2pv0g/kLetwCGkFjTyMWWDQn3rtPoL7KCgdeI\",digest-uri=\"/default\",maxbuf=65536,response=db12041b692f90c8250999f0e25e96d3,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,820 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,821 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,822 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,822 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,823 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,823 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,823 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,824 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,824 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52710
2020-12-03 07:19:51,824 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52710 Wrote 64 bytes.
2020-12-03 07:19:51,827 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,827 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,828 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #11 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,828 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,829 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,829 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #11
2020-12-03 07:19:51,830 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#11 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52710 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,830 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,831 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,831 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#11 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52710
2020-12-03 07:19:51,831 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#11 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52710 Wrote 43 bytes.
2020-12-03 07:19:51,836 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #11
2020-12-03 07:19:51,836 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,836 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,839 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@548a24a
2020-12-03 07:19:51,839 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@548a24a
2020-12-03 07:19:51,839 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@548a24a
2020-12-03 07:19:51,839 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,840 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:51,841 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52710. Number of active connections: 0
2020-12-03 07:19:51,842 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4c163e3
2020-12-03 07:19:51,843 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,843 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,844 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52712; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,844 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,845 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,845 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,846 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52712
2020-12-03 07:19:51,846 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52712 Wrote 194 bytes.
2020-12-03 07:19:51,846 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,847 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,847 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,848 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,848 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,848 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,849 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"7qB3M1uJlT88nuwFT+VJjJrgDSnyK7Bh4690OppC\",nc=00000001,cnonce=\"gJiOTmbcOf0MKi/iFFPPAQKUhSLK5HZGmrj/JgKH\",digest-uri=\"/default\",maxbuf=65536,response=e60f92b4293c018beac95bd4aae63777,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,853 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,854 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,854 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,855 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,855 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,855 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,855 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,856 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,856 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52712
2020-12-03 07:19:51,856 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52712 Wrote 64 bytes.
2020-12-03 07:19:51,857 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,857 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,858 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #12 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,864 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,864 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,865 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #12
2020-12-03 07:19:51,865 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#12 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52712 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,865 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,866 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,866 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#12 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52712
2020-12-03 07:19:51,867 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#12 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52712 Wrote 43 bytes.
2020-12-03 07:19:51,867 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #12
2020-12-03 07:19:51,867 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,867 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,867 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4c163e3
2020-12-03 07:19:51,868 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4c163e3
2020-12-03 07:19:51,868 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4c163e3
2020-12-03 07:19:51,868 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,869 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:51,873 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4d1bf319
2020-12-03 07:19:51,867 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52712. Number of active connections: 0
2020-12-03 07:19:51,875 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,875 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,876 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52714; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,876 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,877 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,877 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,877 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52714
2020-12-03 07:19:51,878 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52714 Wrote 194 bytes.
2020-12-03 07:19:51,878 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,878 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,879 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,880 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,880 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,880 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,881 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"UviK/TM/KUmAp4QifVwYT+cifxsPe8ep97GA7ky3\",nc=00000001,cnonce=\"p3qHR39s30AfPl9kTkr7GyThT4bc5JTIql7+n0gM\",digest-uri=\"/default\",maxbuf=65536,response=ad9cdcea01073c7bc03c8c43d5a2c960,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,882 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,882 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,883 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,884 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,884 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,884 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,885 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,885 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,885 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52714
2020-12-03 07:19:51,886 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52714 Wrote 64 bytes.
2020-12-03 07:19:51,886 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,887 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,887 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #13 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,888 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,888 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,888 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #13
2020-12-03 07:19:51,888 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#13 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52714 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,889 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,889 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,890 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#13 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52714
2020-12-03 07:19:51,890 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#13 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52714 Wrote 43 bytes.
2020-12-03 07:19:51,890 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #13
2020-12-03 07:19:51,890 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,890 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52714. Number of active connections: 0
2020-12-03 07:19:51,891 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,892 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4d1bf319
2020-12-03 07:19:51,892 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4d1bf319
2020-12-03 07:19:51,892 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4d1bf319
2020-12-03 07:19:51,892 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,893 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:51,896 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@710636b0
2020-12-03 07:19:51,897 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,897 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,898 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52716; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,899 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,901 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,901 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,901 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52716
2020-12-03 07:19:51,902 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52716 Wrote 194 bytes.
2020-12-03 07:19:51,902 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,903 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,903 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,904 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,904 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,904 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,905 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"OhpiBiYW9ftMDKatCliyc6gd7w6Uch21oKtnqO3U\",nc=00000001,cnonce=\"jgzIkrvslxqmKAo7BHSzmFbQGRojLsBIRiP6Rn3O\",digest-uri=\"/default\",maxbuf=65536,response=abc5632848387341c5e6599dc60f90b3,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,906 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,906 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,918 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,919 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,919 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,919 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,919 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,920 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,920 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52716
2020-12-03 07:19:51,920 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52716 Wrote 64 bytes.
2020-12-03 07:19:51,923 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,924 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,924 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #14 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,924 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,925 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,925 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #14
2020-12-03 07:19:51,925 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#14 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52716 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,925 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,926 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,926 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#14 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52716
2020-12-03 07:19:51,926 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#14 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52716 Wrote 43 bytes.
2020-12-03 07:19:51,926 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #14
2020-12-03 07:19:51,927 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@710636b0
2020-12-03 07:19:51,927 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52716. Number of active connections: 0
2020-12-03 07:19:51,927 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,927 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,927 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@710636b0
2020-12-03 07:19:51,928 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@710636b0
2020-12-03 07:19:51,928 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,929 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:51,930 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@5745ca0e
2020-12-03 07:19:51,932 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,932 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,933 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52718; # active connections: 1; # queued calls: 0
2020-12-03 07:19:51,933 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,934 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,934 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,934 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52718
2020-12-03 07:19:51,935 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52718 Wrote 194 bytes.
2020-12-03 07:19:51,935 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,936 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,936 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,937 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,937 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,937 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,943 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"mjqdKc3Fp9vbIsu/gqNskiGCj340xDfryClbnb93\",nc=00000001,cnonce=\"ynupmq3tSERxj7LPz5fkuNlyzqiJB/H9Yu/4yM76\",digest-uri=\"/default\",maxbuf=65536,response=0a4b435f2ce9c79f3ae561da194da4c2,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,960 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,960 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,961 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,962 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,963 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,963 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,963 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,963 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,964 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52718
2020-12-03 07:19:51,964 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52718 Wrote 64 bytes.
2020-12-03 07:19:51,965 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:51,965 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:51,965 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #15 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:51,966 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:51,969 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:51,970 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #15
2020-12-03 07:19:51,971 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#15 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52718 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:51,971 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:51,972 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:51,972 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#15 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52718
2020-12-03 07:19:51,972 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#15 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52718 Wrote 43 bytes.
2020-12-03 07:19:51,973 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #15
2020-12-03 07:19:51,973 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:51,973 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:51,984 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@5745ca0e
2020-12-03 07:19:51,985 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@5745ca0e
2020-12-03 07:19:51,985 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@5745ca0e
2020-12-03 07:19:51,985 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:51,986 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:51,988 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4b8d604b
2020-12-03 07:19:51,988 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:51,989 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:51,989 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52722; # active connections: 2; # queued calls: 0
2020-12-03 07:19:51,990 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:51,990 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52718. Number of active connections: 1
2020-12-03 07:19:51,991 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,991 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:51,991 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52722
2020-12-03 07:19:51,991 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52722 Wrote 194 bytes.
2020-12-03 07:19:51,992 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:51,992 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:51,993 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:51,993 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:51,993 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:51,993 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:51,994 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"X+JBjuDmyjZq4t+gE+s9nHgnPcxA3Qm0495JbeLk\",nc=00000001,cnonce=\"tP3gHh93bLEcNsO9Icps/5eDr3vD9SMOwKPzWTid\",digest-uri=\"/default\",maxbuf=65536,response=a2a5a97afdea1b600a4df06ebb3f39fd,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:51,996 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:51,996 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:51,997 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:51,997 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:51,998 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:51,998 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:51,998 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:51,998 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:51,999 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52722
2020-12-03 07:19:51,999 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52722 Wrote 64 bytes.
2020-12-03 07:19:52,000 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,008 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,008 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #16 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,008 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,009 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,009 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #16
2020-12-03 07:19:52,010 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#16 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52722 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,010 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,011 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,011 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#16 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52722
2020-12-03 07:19:52,011 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#16 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52722 Wrote 43 bytes.
2020-12-03 07:19:52,012 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #16
2020-12-03 07:19:52,012 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,012 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,012 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52722. Number of active connections: 0
2020-12-03 07:19:52,012 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4b8d604b
2020-12-03 07:19:52,013 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4b8d604b
2020-12-03 07:19:52,013 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4b8d604b
2020-12-03 07:19:52,013 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,014 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,016 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@333d4a8c
2020-12-03 07:19:52,017 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,017 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,018 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,020 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52724; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,020 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,021 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,021 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52724
2020-12-03 07:19:52,021 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52724 Wrote 194 bytes.
2020-12-03 07:19:52,022 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,022 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,023 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,024 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,024 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,024 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,025 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"oQ6PN9qOUY48vJUEiUnaEHPhMC/FlMMdW7roE2aV\",nc=00000001,cnonce=\"5CE2qh+xfsL3dnJM8c1MDOqxTrPPzFx4HPIK4/u4\",digest-uri=\"/default\",maxbuf=65536,response=d3beda8eacb30e974310604249264ae5,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,028 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,028 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,029 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,030 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,031 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,031 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,031 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,031 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,031 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52724
2020-12-03 07:19:52,032 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52724 Wrote 64 bytes.
2020-12-03 07:19:52,032 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,033 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,035 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #17 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,039 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,040 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,040 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #17
2020-12-03 07:19:52,040 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#17 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52724 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,040 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,041 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,041 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#17 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52724
2020-12-03 07:19:52,042 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#17 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52724 Wrote 43 bytes.
2020-12-03 07:19:52,042 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #17
2020-12-03 07:19:52,042 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@333d4a8c
2020-12-03 07:19:52,043 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@333d4a8c
2020-12-03 07:19:52,043 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@333d4a8c
2020-12-03 07:19:52,043 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,042 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52724. Number of active connections: 0
2020-12-03 07:19:52,042 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,043 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,044 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,045 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@50378a4
2020-12-03 07:19:52,046 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,046 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,046 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52726; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,047 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,047 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,047 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,048 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52726
2020-12-03 07:19:52,048 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52726 Wrote 194 bytes.
2020-12-03 07:19:52,048 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,049 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,049 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,050 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,050 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,050 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,051 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"d/GpDPP+FtKRREkb4fPjmcHG5K3JP691yQkC+PQ/\",nc=00000001,cnonce=\"hW/5+WDg6F6AaXjh8eh+ME11b3MTALyp21frsGhT\",digest-uri=\"/default\",maxbuf=65536,response=ddc0382507d0a2ef8ab49b369f1c19fc,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,051 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,052 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,053 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,053 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,053 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,054 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,054 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,054 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,054 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52726
2020-12-03 07:19:52,054 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52726 Wrote 64 bytes.
2020-12-03 07:19:52,055 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,055 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,055 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #18 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,056 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,056 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,056 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #18
2020-12-03 07:19:52,057 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#18 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52726 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,058 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,058 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,059 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#18 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52726
2020-12-03 07:19:52,059 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#18 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52726 Wrote 43 bytes.
2020-12-03 07:19:52,059 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #18
2020-12-03 07:19:52,060 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,060 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52726. Number of active connections: 0
2020-12-03 07:19:52,060 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@50378a4
2020-12-03 07:19:52,060 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,060 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@50378a4
2020-12-03 07:19:52,060 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@50378a4
2020-12-03 07:19:52,060 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,061 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,062 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@624ea235
2020-12-03 07:19:52,063 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,063 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,064 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52728; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,064 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,065 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,065 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,065 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52728
2020-12-03 07:19:52,065 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52728 Wrote 194 bytes.
2020-12-03 07:19:52,066 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,066 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,066 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,067 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,067 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,067 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,068 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"fYb/2ONmop0+uJzchIUsTl+xxkrFS4WPSgZMiG89\",nc=00000001,cnonce=\"hxS9LJPjX67Yuq1sEEWdkdmYYdXToC9VVix7l8R6\",digest-uri=\"/default\",maxbuf=65536,response=d4cf5b1f7c9800d48bb06267ab8f124e,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,069 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,069 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,069 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,070 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,070 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,070 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,071 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,071 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,071 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52728
2020-12-03 07:19:52,071 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52728 Wrote 64 bytes.
2020-12-03 07:19:52,071 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,072 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,072 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #19 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,072 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,073 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,073 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #19
2020-12-03 07:19:52,073 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#19 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52728 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,073 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,074 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,074 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#19 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52728
2020-12-03 07:19:52,074 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#19 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52728 Wrote 43 bytes.
2020-12-03 07:19:52,075 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #19
2020-12-03 07:19:52,075 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,075 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52728. Number of active connections: 0
2020-12-03 07:19:52,075 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@624ea235
2020-12-03 07:19:52,076 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@624ea235
2020-12-03 07:19:52,076 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@624ea235
2020-12-03 07:19:52,077 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,076 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,078 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,079 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@6f15d60e
2020-12-03 07:19:52,085 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,085 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,086 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52730; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,086 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,087 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,087 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,088 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52730
2020-12-03 07:19:52,088 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52730 Wrote 194 bytes.
2020-12-03 07:19:52,088 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,089 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,089 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,090 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,090 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,090 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,091 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"X8CfCVYSEWbba07jpvVYY5T7WOvcJjbdV4aQQOpu\",nc=00000001,cnonce=\"s236kwVfvZTeYeh4Z7Knc4cnEg0UUhN5ZsbZnn0p\",digest-uri=\"/default\",maxbuf=65536,response=ec7b28877abcd129b9ec491b0afa00bd,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,092 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,092 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,093 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,094 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,094 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,094 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,095 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,095 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,096 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52730
2020-12-03 07:19:52,096 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52730 Wrote 64 bytes.
2020-12-03 07:19:52,096 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,097 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,097 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #20 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,098 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,098 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,098 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #20
2020-12-03 07:19:52,098 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#20 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52730 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,099 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,099 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,100 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#20 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52730
2020-12-03 07:19:52,100 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#20 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52730 Wrote 43 bytes.
2020-12-03 07:19:52,100 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #20
2020-12-03 07:19:52,100 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,100 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,100 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52730. Number of active connections: 0
2020-12-03 07:19:52,101 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@6f15d60e
2020-12-03 07:19:52,101 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@6f15d60e
2020-12-03 07:19:52,101 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@6f15d60e
2020-12-03 07:19:52,101 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,102 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,104 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@28cda624
2020-12-03 07:19:52,104 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,105 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,105 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52732; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,106 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,106 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,106 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,107 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52732
2020-12-03 07:19:52,107 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52732 Wrote 194 bytes.
2020-12-03 07:19:52,108 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,108 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,109 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,109 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,110 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,110 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,111 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"ZYr1vy/TFdIquPnwdKbdN1o0nBtthoe4BZr10FqE\",nc=00000001,cnonce=\"QwVoJ+mNAkJmOE5l679UTi7Mv3rER8JNXTJoPcCx\",digest-uri=\"/default\",maxbuf=65536,response=7d9473e5a942c747645d27958456e6a4,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,111 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,112 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,113 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,113 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,113 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,114 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,114 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,114 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,114 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52732
2020-12-03 07:19:52,115 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52732 Wrote 64 bytes.
2020-12-03 07:19:52,115 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,116 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,116 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #21 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,116 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,117 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,117 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #21
2020-12-03 07:19:52,117 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#21 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52732 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,117 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,118 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,119 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#21 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52732
2020-12-03 07:19:52,119 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#21 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52732 Wrote 43 bytes.
2020-12-03 07:19:52,119 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #21
2020-12-03 07:19:52,120 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@28cda624
2020-12-03 07:19:52,120 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52732. Number of active connections: 0
2020-12-03 07:19:52,120 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,120 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@28cda624
2020-12-03 07:19:52,120 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,120 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@28cda624
2020-12-03 07:19:52,121 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,121 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,123 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@7fb4f2a9
2020-12-03 07:19:52,124 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,124 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,125 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52734; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,125 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,126 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,126 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,126 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52734
2020-12-03 07:19:52,127 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52734 Wrote 194 bytes.
2020-12-03 07:19:52,127 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,127 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,128 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,128 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,128 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,129 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,129 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"e9VTEU9LvVsfEe/WRxZ/aZTsWRtsIIsIW6+BeH5s\",nc=00000001,cnonce=\"J9g+ZiGrc+kl5xp7uu22WL255QW71SL67LYfAVZa\",digest-uri=\"/default\",maxbuf=65536,response=9b80266183dac1d7511f0c840dfbfdd4,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,130 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,130 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,131 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,131 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,132 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,132 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,132 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,132 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,132 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52734
2020-12-03 07:19:52,133 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52734 Wrote 64 bytes.
2020-12-03 07:19:52,133 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,134 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,134 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #22 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,134 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,134 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,135 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #22
2020-12-03 07:19:52,136 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#22 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52734 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,136 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,136 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,137 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#22 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52734
2020-12-03 07:19:52,137 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#22 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52734 Wrote 43 bytes.
2020-12-03 07:19:52,137 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #22
2020-12-03 07:19:52,137 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,137 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@7fb4f2a9
2020-12-03 07:19:52,138 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52734. Number of active connections: 0
2020-12-03 07:19:52,138 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,138 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@7fb4f2a9
2020-12-03 07:19:52,138 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@7fb4f2a9
2020-12-03 07:19:52,138 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,139 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,141 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@3aa078fd
2020-12-03 07:19:52,141 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,142 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,142 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52736; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,143 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,148 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,148 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,149 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52736
2020-12-03 07:19:52,149 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52736 Wrote 194 bytes.
2020-12-03 07:19:52,149 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,150 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,151 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,151 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,151 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,152 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,153 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"otHyoW/WpFtF05VlgcsmUdCuxzBbRs1Blz1kAJY7\",nc=00000001,cnonce=\"xuPKeOGCIlpB4Up2CAbNaxoN88OHlnIVIyTj3hR9\",digest-uri=\"/default\",maxbuf=65536,response=0e295b4685cf742d5dfc4fc86ab09985,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,153 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,153 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,154 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,155 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,155 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,155 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,156 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,156 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,156 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52736
2020-12-03 07:19:52,156 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52736 Wrote 64 bytes.
2020-12-03 07:19:52,157 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,205 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #23 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,205 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,208 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,208 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,208 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #23
2020-12-03 07:19:52,209 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#23 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52736 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,209 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,210 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,210 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#23 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52736
2020-12-03 07:19:52,210 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#23 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52736 Wrote 43 bytes.
2020-12-03 07:19:52,210 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #23
2020-12-03 07:19:52,211 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,211 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@3aa078fd
2020-12-03 07:19:52,211 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@3aa078fd
2020-12-03 07:19:52,211 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@3aa078fd
2020-12-03 07:19:52,211 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,213 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52736. Number of active connections: 0
2020-12-03 07:19:52,211 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,213 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,215 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@d2de489
2020-12-03 07:19:52,215 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,216 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,216 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52738; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,217 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,218 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,218 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,218 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52738
2020-12-03 07:19:52,218 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52738 Wrote 194 bytes.
2020-12-03 07:19:52,219 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,219 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,220 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,220 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,221 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,221 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,222 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"wg/Rw4yuFWe+UxY2R9vKVQftoTmikeQmbSUjGW86\",nc=00000001,cnonce=\"2+jAh2/q9Ryv1XPTlypRkXiLhnPFrjGb5XK0amG0\",digest-uri=\"/default\",maxbuf=65536,response=bc21eff20506927b85e94d1cadade21b,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,222 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,223 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,224 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,224 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,224 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,225 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,225 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,225 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,231 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52738
2020-12-03 07:19:52,232 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52738 Wrote 64 bytes.
2020-12-03 07:19:52,232 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,233 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,233 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #24 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,234 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,234 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,234 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #24
2020-12-03 07:19:52,235 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#24 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52738 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,235 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,236 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,236 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#24 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52738
2020-12-03 07:19:52,236 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#24 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52738 Wrote 43 bytes.
2020-12-03 07:19:52,237 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #24
2020-12-03 07:19:52,237 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,237 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,237 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52738. Number of active connections: 0
2020-12-03 07:19:52,241 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@d2de489
2020-12-03 07:19:52,241 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@d2de489
2020-12-03 07:19:52,241 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@d2de489
2020-12-03 07:19:52,242 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,243 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,244 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@37313c65
2020-12-03 07:19:52,245 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,245 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,246 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,247 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52740; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,247 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,248 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,248 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52740
2020-12-03 07:19:52,249 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52740 Wrote 194 bytes.
2020-12-03 07:19:52,249 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,249 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,250 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,251 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,251 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,251 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,252 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"Hjhy7BqYFUQhpy12wpBUzmsLGIS/4nqZdfIJndVO\",nc=00000001,cnonce=\"I+ipXkenXSiqVRMfcBKcNajN94PSPodOcH40jfZO\",digest-uri=\"/default\",maxbuf=65536,response=9fcff5106d13c383f03f4e2b307b7b79,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,253 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,253 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,254 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,254 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,255 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,255 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,255 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,255 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,255 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52740
2020-12-03 07:19:52,256 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52740 Wrote 64 bytes.
2020-12-03 07:19:52,256 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,257 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,257 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #25 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,257 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,258 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,258 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #25
2020-12-03 07:19:52,258 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#25 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52740 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,259 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,259 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,260 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#25 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52740
2020-12-03 07:19:52,260 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#25 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52740 Wrote 43 bytes.
2020-12-03 07:19:52,260 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #25
2020-12-03 07:19:52,260 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,260 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,261 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@37313c65
2020-12-03 07:19:52,261 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@37313c65
2020-12-03 07:19:52,261 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@37313c65
2020-12-03 07:19:52,262 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,263 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,264 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@49c90a9c
2020-12-03 07:19:52,265 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,265 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,266 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,267 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52740. Number of active connections: 0
2020-12-03 07:19:52,272 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52744; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,272 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,272 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,273 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52744
2020-12-03 07:19:52,273 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52744 Wrote 194 bytes.
2020-12-03 07:19:52,274 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,274 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,275 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,275 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,276 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,276 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,283 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"/nzvdVDru0Y+olXKgmfnJCJm+UM+38UJQlfFJYDA\",nc=00000001,cnonce=\"+hgdZm+sZh+e3hoOGHp2AsLxKn5wsL6EXv2Kv7VC\",digest-uri=\"/default\",maxbuf=65536,response=fc9d4cbb555c6a0b0a1f0ac8be800125,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,284 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,284 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,285 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,286 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,286 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,286 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,286 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,286 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,287 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52744
2020-12-03 07:19:52,287 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52744 Wrote 64 bytes.
2020-12-03 07:19:52,287 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,288 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,291 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #26 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,293 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,293 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,294 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #26
2020-12-03 07:19:52,294 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#26 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52744 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,294 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,295 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,295 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#26 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52744
2020-12-03 07:19:52,296 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #26
2020-12-03 07:19:52,296 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,296 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,299 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#26 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52744 Wrote 43 bytes.
2020-12-03 07:19:52,300 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52744. Number of active connections: 0
2020-12-03 07:19:52,300 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@49c90a9c
2020-12-03 07:19:52,301 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@49c90a9c
2020-12-03 07:19:52,301 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@49c90a9c
2020-12-03 07:19:52,301 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,302 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,308 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@1e16c0aa
2020-12-03 07:19:52,309 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,309 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,310 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52748; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,310 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,311 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,311 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,311 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52748
2020-12-03 07:19:52,312 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52748 Wrote 194 bytes.
2020-12-03 07:19:52,313 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,313 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,314 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,314 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,315 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,315 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,316 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"om1wPSbaCDOegO1ixgIYeOGL8XeTTJo7e5NE5EnV\",nc=00000001,cnonce=\"acdci+L1Sngkm/zvIfhJnztvRDay0sDgdROoUPr1\",digest-uri=\"/default\",maxbuf=65536,response=2979018c1d1077da2cb86f8d3718088c,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,317 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,317 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,318 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,318 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,318 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,318 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,319 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,319 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,319 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52748
2020-12-03 07:19:52,319 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52748 Wrote 64 bytes.
2020-12-03 07:19:52,320 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,320 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,320 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #27 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,321 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,321 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,321 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #27
2020-12-03 07:19:52,322 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#27 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52748 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,323 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,323 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,324 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#27 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52748
2020-12-03 07:19:52,324 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#27 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52748 Wrote 43 bytes.
2020-12-03 07:19:52,324 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #27
2020-12-03 07:19:52,325 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,325 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,325 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@1e16c0aa
2020-12-03 07:19:52,325 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52748. Number of active connections: 0
2020-12-03 07:19:52,326 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@1e16c0aa
2020-12-03 07:19:52,326 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@1e16c0aa
2020-12-03 07:19:52,326 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,327 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,328 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@642a7222
2020-12-03 07:19:52,329 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,329 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,330 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,331 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52750; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,331 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,331 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,331 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52750
2020-12-03 07:19:52,332 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52750 Wrote 194 bytes.
2020-12-03 07:19:52,332 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,332 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,333 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,333 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,333 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,333 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,334 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"U2ms1e+7Xo63ZdyUFSDIqhEyrJqrZmIyJrke6Jqd\",nc=00000001,cnonce=\"fV1qv+Er9iC5TUsAPLh32L8p2AASPldbZyoTnAFd\",digest-uri=\"/default\",maxbuf=65536,response=f7e3d84d546965b7a6875d8b3666f55e,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,334 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,334 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,335 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,336 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,336 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,336 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,336 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,336 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,337 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52750
2020-12-03 07:19:52,337 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52750 Wrote 64 bytes.
2020-12-03 07:19:52,337 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,338 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,340 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #28 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,340 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,340 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,341 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #28
2020-12-03 07:19:52,341 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#28 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52750 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,341 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,342 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,342 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#28 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52750
2020-12-03 07:19:52,342 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#28 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52750 Wrote 43 bytes.
2020-12-03 07:19:52,343 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #28
2020-12-03 07:19:52,343 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,343 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52750. Number of active connections: 0
2020-12-03 07:19:52,343 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,344 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@642a7222
2020-12-03 07:19:52,344 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@642a7222
2020-12-03 07:19:52,344 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@642a7222
2020-12-03 07:19:52,344 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,348 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,350 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@2235eaab
2020-12-03 07:19:52,351 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,351 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,352 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52754; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,352 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,353 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,353 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,353 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52754
2020-12-03 07:19:52,354 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52754 Wrote 194 bytes.
2020-12-03 07:19:52,354 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,354 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,355 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,355 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,355 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,355 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,356 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"aOH4AFxVEbUWRNPMTUa+2ntRMQ8aMEXuylrFy8Pn\",nc=00000001,cnonce=\"bre3ec0+7Z60fil0zBBLK1jqn2NRi7rGVgRWb3fl\",digest-uri=\"/default\",maxbuf=65536,response=f36a038c1cf0a977248566fb12ef8c15,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,360 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,360 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,361 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,362 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,362 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,362 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,362 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,362 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,363 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52754
2020-12-03 07:19:52,363 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52754 Wrote 64 bytes.
2020-12-03 07:19:52,368 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,369 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,369 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #29 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,370 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,370 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,370 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #29
2020-12-03 07:19:52,371 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#29 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52754 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,371 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,372 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,372 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#29 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52754
2020-12-03 07:19:52,372 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#29 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52754 Wrote 43 bytes.
2020-12-03 07:19:52,372 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #29
2020-12-03 07:19:52,373 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,373 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,374 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@2235eaab
2020-12-03 07:19:52,374 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@2235eaab
2020-12-03 07:19:52,374 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@2235eaab
2020-12-03 07:19:52,375 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,376 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52754. Number of active connections: 0
2020-12-03 07:19:52,376 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,377 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@1a5a4e19
2020-12-03 07:19:52,378 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,378 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,379 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52758; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,379 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,380 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,380 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,381 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52758
2020-12-03 07:19:52,381 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52758 Wrote 194 bytes.
2020-12-03 07:19:52,382 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,382 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,383 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,383 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,383 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,384 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,384 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"I1ZzOLGaWkBBjG3Foz+7NJ0Qrk8w6N6mUtDcfwos\",nc=00000001,cnonce=\"kv69LVJ7n7yqfZTx3F+cXh6rmG2S+DrMVwekSzwA\",digest-uri=\"/default\",maxbuf=65536,response=dce1c18b7a893b80b4b45e7d1c90a169,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,388 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,388 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,389 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,390 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,390 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,390 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,391 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,391 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,391 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52758
2020-12-03 07:19:52,392 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52758 Wrote 64 bytes.
2020-12-03 07:19:52,392 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,393 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,394 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #30 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,395 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,395 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,395 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #30
2020-12-03 07:19:52,395 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#30 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52758 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,396 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,396 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,397 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#30 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52758
2020-12-03 07:19:52,397 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#30 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52758 Wrote 43 bytes.
2020-12-03 07:19:52,397 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #30
2020-12-03 07:19:52,397 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,397 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,397 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52758. Number of active connections: 0
2020-12-03 07:19:52,400 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@1a5a4e19
2020-12-03 07:19:52,400 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@1a5a4e19
2020-12-03 07:19:52,400 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@1a5a4e19
2020-12-03 07:19:52,400 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,401 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,406 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@3e2055d6
2020-12-03 07:19:52,407 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,407 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,408 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52760; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,408 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,410 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,411 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,411 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52760
2020-12-03 07:19:52,411 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52760 Wrote 194 bytes.
2020-12-03 07:19:52,412 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,412 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,413 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,413 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,413 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,413 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,414 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"CZrKT/00wmenK/mBCPS9mjK0u+YfRCUbIwVbPW3p\",nc=00000001,cnonce=\"6RR7FV1yF5IFHsgyU4no5E+7izosXH/z+rJaKQGY\",digest-uri=\"/default\",maxbuf=65536,response=f13ce7c3ad36c99299909584cf95ecd8,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,415 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,415 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,416 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,416 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,417 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,417 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,417 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,417 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,418 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52760
2020-12-03 07:19:52,418 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52760 Wrote 64 bytes.
2020-12-03 07:19:52,418 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,419 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,419 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #31 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,419 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,420 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,420 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #31
2020-12-03 07:19:52,422 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#31 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52760 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,422 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,423 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,423 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#31 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52760
2020-12-03 07:19:52,423 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#31 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52760 Wrote 43 bytes.
2020-12-03 07:19:52,424 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #31
2020-12-03 07:19:52,424 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,424 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,425 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52760. Number of active connections: 0
2020-12-03 07:19:52,424 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@3e2055d6
2020-12-03 07:19:52,427 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@3e2055d6
2020-12-03 07:19:52,427 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@3e2055d6
2020-12-03 07:19:52,428 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,428 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,430 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@7d9f158f
2020-12-03 07:19:52,430 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,430 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,431 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52764; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,431 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,432 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,432 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,432 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52764
2020-12-03 07:19:52,433 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52764 Wrote 194 bytes.
2020-12-03 07:19:52,433 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,433 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,434 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,434 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,434 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,434 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,435 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"otG9U6377ZUMcj61qr6zXC9i8VmjaHcsxCVrNXtu\",nc=00000001,cnonce=\"j642LkW84W7JDV8D4WQEhg8BpZhMtdv80Bh5uxgm\",digest-uri=\"/default\",maxbuf=65536,response=45be5dbe795a50ebb9725b29059686cf,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,435 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,436 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,436 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,437 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,437 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,437 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,437 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,437 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,437 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52764
2020-12-03 07:19:52,438 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52764 Wrote 64 bytes.
2020-12-03 07:19:52,438 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,439 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,439 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #32 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,439 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,440 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,440 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #32
2020-12-03 07:19:52,440 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#32 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52764 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,440 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,441 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,441 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#32 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52764
2020-12-03 07:19:52,442 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#32 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52764 Wrote 43 bytes.
2020-12-03 07:19:52,442 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #32
2020-12-03 07:19:52,442 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,442 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,442 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@7d9f158f
2020-12-03 07:19:52,443 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@7d9f158f
2020-12-03 07:19:52,443 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@7d9f158f
2020-12-03 07:19:52,443 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,444 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,446 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52764. Number of active connections: 0
2020-12-03 07:19:52,451 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@2f01783a
2020-12-03 07:19:52,452 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,452 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,453 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52768; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,453 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,454 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,454 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,454 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52768
2020-12-03 07:19:52,455 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52768 Wrote 194 bytes.
2020-12-03 07:19:52,455 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,456 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,456 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,456 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,456 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,457 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,457 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"Odi46kqQ4hy1qtI6/dvC1ZfQFpxEEuENrneuLejU\",nc=00000001,cnonce=\"+40Y8fSl3nrttJo1yzr/PcDaV4qF1Sh9f+VG1UIz\",digest-uri=\"/default\",maxbuf=65536,response=2e743d585f8d401888d55b80d062a4bb,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,458 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,458 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,459 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,460 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,460 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,460 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,460 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,460 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,461 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52768
2020-12-03 07:19:52,461 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52768 Wrote 64 bytes.
2020-12-03 07:19:52,461 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,462 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,462 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #33 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,462 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,463 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,463 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #33
2020-12-03 07:19:52,464 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#33 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52768 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,464 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,465 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,465 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#33 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52768
2020-12-03 07:19:52,465 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#33 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52768 Wrote 43 bytes.
2020-12-03 07:19:52,466 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #33
2020-12-03 07:19:52,466 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,466 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@2f01783a
2020-12-03 07:19:52,466 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@2f01783a
2020-12-03 07:19:52,466 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@2f01783a
2020-12-03 07:19:52,467 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,466 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,467 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,467 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52768. Number of active connections: 0
2020-12-03 07:19:52,469 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@79defdc
2020-12-03 07:19:52,469 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,469 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,470 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52772; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,470 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,471 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,471 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,472 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52772
2020-12-03 07:19:52,472 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52772 Wrote 194 bytes.
2020-12-03 07:19:52,472 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,473 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,482 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,482 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,483 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,483 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,484 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"aQYFujLPOX2e4cUzDX80ZDYmVspfz4FDKrhm+BL4\",nc=00000001,cnonce=\"0sy10C8dDXYYcZL6cOI6S+j1twG4bR0I9QDBHlVw\",digest-uri=\"/default\",maxbuf=65536,response=4fbb67328ff5d50a1b712312d8c43932,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,484 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,485 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,485 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,486 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,486 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,486 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,486 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,487 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,487 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52772
2020-12-03 07:19:52,487 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52772 Wrote 64 bytes.
2020-12-03 07:19:52,487 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,488 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,488 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #34 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,488 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,489 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,489 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #34
2020-12-03 07:19:52,489 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#34 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52772 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,489 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,490 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,490 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#34 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52772
2020-12-03 07:19:52,491 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#34 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52772 Wrote 43 bytes.
2020-12-03 07:19:52,496 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #34
2020-12-03 07:19:52,496 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,496 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52772. Number of active connections: 0
2020-12-03 07:19:52,496 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,496 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@79defdc
2020-12-03 07:19:52,497 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@79defdc
2020-12-03 07:19:52,497 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@79defdc
2020-12-03 07:19:52,497 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,497 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,499 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@17d919b6
2020-12-03 07:19:52,499 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,499 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,500 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52774; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,504 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,505 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,505 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,506 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52774
2020-12-03 07:19:52,506 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52774 Wrote 194 bytes.
2020-12-03 07:19:52,507 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,507 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,508 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,508 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,508 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,508 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,509 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"CdV4OriniNCgd3991s5lVo2jZj/IPP2uvLtCpdei\",nc=00000001,cnonce=\"6zI5WAZDxTC3qy5W9jwuYSGLfwtD+J2NWc7wFXDd\",digest-uri=\"/default\",maxbuf=65536,response=9e346d4cc9e3f105846394153f29dfbe,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,512 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,512 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,513 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,513 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,514 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,514 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,514 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,514 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,514 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52774
2020-12-03 07:19:52,515 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52774 Wrote 64 bytes.
2020-12-03 07:19:52,515 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,516 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,517 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #35 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,517 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,517 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,517 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #35
2020-12-03 07:19:52,520 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#35 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52774 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,520 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,521 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,521 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#35 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52774
2020-12-03 07:19:52,521 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#35 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52774 Wrote 43 bytes.
2020-12-03 07:19:52,521 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #35
2020-12-03 07:19:52,522 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@17d919b6
2020-12-03 07:19:52,522 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,522 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@17d919b6
2020-12-03 07:19:52,522 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@17d919b6
2020-12-03 07:19:52,522 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,522 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,522 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52774. Number of active connections: 0
2020-12-03 07:19:52,523 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:167
2020-12-03 07:19:52,524 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@3f1d2e23
2020-12-03 07:19:52,524 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,524 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,525 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,528 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52778; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,532 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,533 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,533 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52778
2020-12-03 07:19:52,533 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52778 Wrote 194 bytes.
2020-12-03 07:19:52,536 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,536 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,537 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,537 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,538 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,538 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,539 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"+glh102PCdwZrpQ6tnOSi+EweqZWoVPOjCZrYWB5\",nc=00000001,cnonce=\"avK8Nzdo6W2kmh5orWM68tIVhXuJX8DSnMXX4pKu\",digest-uri=\"/default\",maxbuf=65536,response=ed471db4f2290f1590c6527f63581450,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,539 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,539 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,540 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,540 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,541 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,541 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,541 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,541 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,541 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52778
2020-12-03 07:19:52,541 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52778 Wrote 64 bytes.
2020-12-03 07:19:52,542 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,542 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,543 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #36 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,543 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,543 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,543 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #36
2020-12-03 07:19:52,544 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#36 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52778 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,544 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,544 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,545 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#36 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52778
2020-12-03 07:19:52,545 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#36 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52778 Wrote 43 bytes.
2020-12-03 07:19:52,545 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #36
2020-12-03 07:19:52,545 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@3f1d2e23
2020-12-03 07:19:52,546 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@3f1d2e23
2020-12-03 07:19:52,546 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@3f1d2e23
2020-12-03 07:19:52,546 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,545 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52778. Number of active connections: 0
2020-12-03 07:19:52,545 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,547 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,547 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,548 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@3576ddc2
2020-12-03 07:19:52,549 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,549 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,550 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52782; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,550 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,551 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,551 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,551 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52782
2020-12-03 07:19:52,551 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52782 Wrote 194 bytes.
2020-12-03 07:19:52,552 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,552 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,553 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,553 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,553 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,553 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,554 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"mlagtOuk4h3WnUQqEwmC7UZmehnIyZWHWUpauy/H\",nc=00000001,cnonce=\"HHwvmPOXr3qVy7Mq3jCrQHB/ugHcyFOzJ+k3eKRk\",digest-uri=\"/default\",maxbuf=65536,response=f4594833a9ad77ff81310ef1b55452ed,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,554 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,555 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,555 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,556 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,556 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,556 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,556 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,556 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,557 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52782
2020-12-03 07:19:52,557 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52782 Wrote 64 bytes.
2020-12-03 07:19:52,557 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,558 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,558 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #37 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,558 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,558 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,559 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #37
2020-12-03 07:19:52,559 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#37 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52782 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,559 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,560 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,560 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#37 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52782
2020-12-03 07:19:52,561 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#37 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52782 Wrote 43 bytes.
2020-12-03 07:19:52,561 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #37
2020-12-03 07:19:52,561 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@3576ddc2
2020-12-03 07:19:52,561 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,561 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,561 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52782. Number of active connections: 0
2020-12-03 07:19:52,561 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@3576ddc2
2020-12-03 07:19:52,562 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@3576ddc2
2020-12-03 07:19:52,562 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,563 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,564 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@1ebea008
2020-12-03 07:19:52,564 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,564 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,565 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,568 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52784; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,568 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,568 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,569 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52784
2020-12-03 07:19:52,569 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52784 Wrote 194 bytes.
2020-12-03 07:19:52,569 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,569 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,570 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,570 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,570 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,570 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,571 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"1rtNBrjwyIYpPRbagLsEEXWrKeEwk7n+YRWKdFa3\",nc=00000001,cnonce=\"sd/0QOJtUpdpwGDGpyn57uJ0v6zL5aWtvb+BIkkL\",digest-uri=\"/default\",maxbuf=65536,response=6c17b62257ce1be1d54f95535b2c2a81,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,571 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,571 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,572 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,572 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,572 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,572 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,572 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,572 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,573 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52784
2020-12-03 07:19:52,573 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52784 Wrote 64 bytes.
2020-12-03 07:19:52,573 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,575 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,575 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #38 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,576 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,576 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,577 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #38
2020-12-03 07:19:52,577 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#38 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52784 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,577 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,578 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,578 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#38 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52784
2020-12-03 07:19:52,579 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#38 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52784 Wrote 43 bytes.
2020-12-03 07:19:52,579 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #38
2020-12-03 07:19:52,580 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,580 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@1ebea008
2020-12-03 07:19:52,580 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@1ebea008
2020-12-03 07:19:52,580 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52784. Number of active connections: 0
2020-12-03 07:19:52,580 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,580 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@1ebea008
2020-12-03 07:19:52,581 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,581 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,583 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@c667f46
2020-12-03 07:19:52,583 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,584 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,588 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52788; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,589 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,590 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,590 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,591 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52788
2020-12-03 07:19:52,591 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52788 Wrote 194 bytes.
2020-12-03 07:19:52,596 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,596 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,597 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,597 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,597 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,597 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,598 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"CA6SldIC+BOpAb+J9PaRBG+ZCVbYlo2uYUeGGV82\",nc=00000001,cnonce=\"cW+TKvSpyLxx2bNo5aZ9NAyOMmv1n0WRW6WZBWsb\",digest-uri=\"/default\",maxbuf=65536,response=e13eefde9a8d6e7e675442dfa4f8cecc,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,599 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,599 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,600 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,600 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,600 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,600 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,601 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,601 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,601 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52788
2020-12-03 07:19:52,601 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52788 Wrote 64 bytes.
2020-12-03 07:19:52,602 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,603 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #39 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,603 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,604 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,604 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #39
2020-12-03 07:19:52,604 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#39 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52788 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,604 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,605 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,605 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#39 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52788
2020-12-03 07:19:52,605 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#39 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52788 Wrote 43 bytes.
2020-12-03 07:19:52,604 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,608 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #39
2020-12-03 07:19:52,608 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,608 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,608 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52788. Number of active connections: 0
2020-12-03 07:19:52,612 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@c667f46
2020-12-03 07:19:52,612 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@c667f46
2020-12-03 07:19:52,612 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@c667f46
2020-12-03 07:19:52,612 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,613 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,615 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@452e19ca
2020-12-03 07:19:52,615 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,615 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,621 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,628 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52792; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,628 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,629 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,629 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52792
2020-12-03 07:19:52,629 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52792 Wrote 194 bytes.
2020-12-03 07:19:52,630 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,630 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,631 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,631 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,632 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,632 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,633 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"tmpOHL59gJwak2/nqMk0K+XL42mufzhmAGtotAgS\",nc=00000001,cnonce=\"/TiRZLFTprhYLQ9XjyoiXJk3B7Lw6SCV6/WSK2t2\",digest-uri=\"/default\",maxbuf=65536,response=f1366eeb2f0624c5a3f15925833b80e3,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,633 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,633 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,634 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,634 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,634 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,634 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,634 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,634 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,635 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52792
2020-12-03 07:19:52,635 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52792 Wrote 64 bytes.
2020-12-03 07:19:52,635 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,636 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,636 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #40 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,636 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,636 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,636 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #40
2020-12-03 07:19:52,638 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#40 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52792 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,639 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,639 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,640 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#40 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52792
2020-12-03 07:19:52,640 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#40 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52792 Wrote 43 bytes.
2020-12-03 07:19:52,640 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #40
2020-12-03 07:19:52,641 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,641 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@452e19ca
2020-12-03 07:19:52,641 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@452e19ca
2020-12-03 07:19:52,641 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@452e19ca
2020-12-03 07:19:52,641 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,641 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,642 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,643 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52792. Number of active connections: 0
2020-12-03 07:19:52,644 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4b2c5e02
2020-12-03 07:19:52,644 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,644 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,645 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52798; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,645 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,646 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,646 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,646 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52798
2020-12-03 07:19:52,647 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52798 Wrote 194 bytes.
2020-12-03 07:19:52,647 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,647 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,648 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,648 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,648 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,648 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,649 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"qfg/kzBE/dwRy+O5wa8DOmV6ON1/w8pvIZDMnncG\",nc=00000001,cnonce=\"DqxXgNK8OG+3hJBJXEhgVzqMxsq2L6zxubJvTSB3\",digest-uri=\"/default\",maxbuf=65536,response=c530b867bb6bf2e0c27f2069a2a8aae4,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,649 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,649 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,650 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,651 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,651 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,651 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,652 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,652 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,652 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52798
2020-12-03 07:19:52,652 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52798 Wrote 64 bytes.
2020-12-03 07:19:52,653 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,653 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,653 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #41 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,654 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,654 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,654 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #41
2020-12-03 07:19:52,655 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#41 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52798 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,655 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,655 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,656 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#41 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52798
2020-12-03 07:19:52,656 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#41 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52798 Wrote 43 bytes.
2020-12-03 07:19:52,656 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #41
2020-12-03 07:19:52,656 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,657 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,656 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52798. Number of active connections: 0
2020-12-03 07:19:52,660 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4b2c5e02
2020-12-03 07:19:52,660 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4b2c5e02
2020-12-03 07:19:52,660 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4b2c5e02
2020-12-03 07:19:52,660 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,661 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,663 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@27912e3
2020-12-03 07:19:52,663 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,664 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,665 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,665 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52802; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,667 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,667 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,668 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52802
2020-12-03 07:19:52,668 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52802 Wrote 194 bytes.
2020-12-03 07:19:52,668 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,670 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,671 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,671 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,672 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,672 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,673 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"6Bzc87wvtAIxe1qcacxWg3AOCj6peKqeMWI/YzCA\",nc=00000001,cnonce=\"s0BQty6iy1V9lwEn5qTJorwapWO/xNTL/RLi+DLF\",digest-uri=\"/default\",maxbuf=65536,response=994386329ca146c227f8099dec5bbd7c,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,673 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,674 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,674 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,676 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,676 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,676 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,677 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,677 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,677 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52802
2020-12-03 07:19:52,677 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52802 Wrote 64 bytes.
2020-12-03 07:19:52,678 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,678 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,678 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #42 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,679 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,679 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,679 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #42
2020-12-03 07:19:52,680 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#42 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52802 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,680 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,681 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,681 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#42 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52802
2020-12-03 07:19:52,682 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#42 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52802 Wrote 43 bytes.
2020-12-03 07:19:52,682 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #42
2020-12-03 07:19:52,682 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@27912e3
2020-12-03 07:19:52,682 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52802. Number of active connections: 0
2020-12-03 07:19:52,682 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,682 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@27912e3
2020-12-03 07:19:52,682 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,683 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@27912e3
2020-12-03 07:19:52,683 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,684 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,685 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@cd1e646
2020-12-03 07:19:52,685 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,685 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,686 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,688 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52806; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,688 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,688 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,689 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52806
2020-12-03 07:19:52,689 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52806 Wrote 194 bytes.
2020-12-03 07:19:52,689 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,690 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,690 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,691 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,691 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,691 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,692 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"zzGoPYqWXmRGDrBhdZn4VMhFLrbjQxBOFeBvmKEK\",nc=00000001,cnonce=\"9XnVYPGyRXCqtvIE6DIsae9m/p/9u8qKteWsxaqQ\",digest-uri=\"/default\",maxbuf=65536,response=7843e91e2fd60ad86a0b0ab5f6c9199a,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,692 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,693 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,693 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,694 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,694 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,694 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,694 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,694 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,694 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52806
2020-12-03 07:19:52,694 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52806 Wrote 64 bytes.
2020-12-03 07:19:52,695 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,695 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,696 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #43 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,696 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,696 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,697 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #43
2020-12-03 07:19:52,697 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#43 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52806 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,698 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,698 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,699 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#43 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52806
2020-12-03 07:19:52,699 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#43 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52806 Wrote 43 bytes.
2020-12-03 07:19:52,700 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #43
2020-12-03 07:19:52,700 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@cd1e646
2020-12-03 07:19:52,700 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@cd1e646
2020-12-03 07:19:52,700 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@cd1e646
2020-12-03 07:19:52,700 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,700 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52806. Number of active connections: 0
2020-12-03 07:19:52,701 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,702 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@6dd7b5a3
2020-12-03 07:19:52,703 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,703 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,704 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52808; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,704 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,705 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,705 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,705 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52808
2020-12-03 07:19:52,705 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52808 Wrote 194 bytes.
2020-12-03 07:19:52,706 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,706 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,706 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,707 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,707 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,707 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,708 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"MQly1CnOr4SQ+V8YnSB/zK45H+GKyOCUR0atD65R\",nc=00000001,cnonce=\"XFJd2qNpr6gedt1dOp2aEkuosexGFfD2jIdElPWq\",digest-uri=\"/default\",maxbuf=65536,response=2aa82cfe827bcf2dd794b41528b506da,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,700 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,710 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,712 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,712 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,713 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,713 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,713 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,713 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,714 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,714 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,714 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52808
2020-12-03 07:19:52,714 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52808 Wrote 64 bytes.
2020-12-03 07:19:52,714 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,716 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,716 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #44 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,717 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,717 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,717 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #44
2020-12-03 07:19:52,718 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#44 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52808 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,718 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,719 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,719 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#44 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52808
2020-12-03 07:19:52,719 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#44 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52808 Wrote 43 bytes.
2020-12-03 07:19:52,719 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #44
2020-12-03 07:19:52,720 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,720 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,720 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52808. Number of active connections: 0
2020-12-03 07:19:52,721 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@6dd7b5a3
2020-12-03 07:19:52,721 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@6dd7b5a3
2020-12-03 07:19:52,721 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@6dd7b5a3
2020-12-03 07:19:52,721 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,722 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,723 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@5e21e98f
2020-12-03 07:19:52,724 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,724 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,725 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52812; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,726 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,726 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,726 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,727 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52812
2020-12-03 07:19:52,727 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52812 Wrote 194 bytes.
2020-12-03 07:19:52,727 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,728 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,728 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,728 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,729 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,729 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,729 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"nZ2NflN3LH5DMdPiIVP+nitDbDpBvyn77tm87iqV\",nc=00000001,cnonce=\"xkaeihqyl6kDLpGokO/HBNwPBOel+/BZ39UO1HeE\",digest-uri=\"/default\",maxbuf=65536,response=821227c144a410b92c64faa4533b17e5,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,730 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,730 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,730 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,731 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,731 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,731 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,731 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,731 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,731 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52812
2020-12-03 07:19:52,732 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52812 Wrote 64 bytes.
2020-12-03 07:19:52,735 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,735 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,735 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #45 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,736 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,736 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,736 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #45
2020-12-03 07:19:52,737 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#45 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52812 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,737 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,738 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,738 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#45 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52812
2020-12-03 07:19:52,738 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#45 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52812 Wrote 43 bytes.
2020-12-03 07:19:52,743 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #45
2020-12-03 07:19:52,743 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@5e21e98f
2020-12-03 07:19:52,744 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@5e21e98f
2020-12-03 07:19:52,744 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@5e21e98f
2020-12-03 07:19:52,744 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,745 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,743 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,746 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,746 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@37911f88
2020-12-03 07:19:52,746 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,747 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,747 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52814; # active connections: 2; # queued calls: 0
2020-12-03 07:19:52,748 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52812. Number of active connections: 1
2020-12-03 07:19:52,748 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,752 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,752 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,752 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52814
2020-12-03 07:19:52,752 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52814 Wrote 194 bytes.
2020-12-03 07:19:52,753 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,753 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,753 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,754 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,754 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,754 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,757 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"BrgF339g3+g/ZLoVYRETKJnJDoomBCagnEddQZJi\",nc=00000001,cnonce=\"RpUENavCVFEdFptILZPhyrwsOPN+zRImg+lutLON\",digest-uri=\"/default\",maxbuf=65536,response=90205e3db9e04d21ea00ba14252821c0,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,758 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,758 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,759 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,759 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,759 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,760 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,760 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,760 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,760 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52814
2020-12-03 07:19:52,761 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52814 Wrote 64 bytes.
2020-12-03 07:19:52,761 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,762 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,762 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #46 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,762 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,762 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,763 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #46
2020-12-03 07:19:52,768 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#46 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52814 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,768 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,769 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,769 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#46 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52814
2020-12-03 07:19:52,769 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#46 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52814 Wrote 43 bytes.
2020-12-03 07:19:52,769 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #46
2020-12-03 07:19:52,770 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52814. Number of active connections: 0
2020-12-03 07:19:52,770 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@37911f88
2020-12-03 07:19:52,770 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,770 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,770 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@37911f88
2020-12-03 07:19:52,770 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@37911f88
2020-12-03 07:19:52,770 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,771 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,772 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@64e7619d
2020-12-03 07:19:52,773 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,773 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,773 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52820; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,774 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,774 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,774 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,775 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52820
2020-12-03 07:19:52,775 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52820 Wrote 194 bytes.
2020-12-03 07:19:52,775 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,775 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,776 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,776 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,777 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,777 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,777 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"s9O2ZXbpKBRPi/ttjjdx33q1T76vUqNEX7ZHPMVA\",nc=00000001,cnonce=\"v88H/sMD4g68OzF7KhnxOjTxVa5TUGop2kk7CyAU\",digest-uri=\"/default\",maxbuf=65536,response=7bafae33089e7afeb5a55d3a45c0913b,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,778 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,778 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,779 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,779 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,779 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,779 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,780 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,780 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,780 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52820
2020-12-03 07:19:52,780 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52820 Wrote 64 bytes.
2020-12-03 07:19:52,780 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,781 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #47 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,781 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,781 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,781 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,782 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #47
2020-12-03 07:19:52,783 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#47 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52820 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,783 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,784 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,784 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#47 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52820
2020-12-03 07:19:52,784 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#47 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52820 Wrote 43 bytes.
2020-12-03 07:19:52,784 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #47
2020-12-03 07:19:52,784 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,785 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,785 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52820. Number of active connections: 0
2020-12-03 07:19:52,785 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@64e7619d
2020-12-03 07:19:52,786 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@64e7619d
2020-12-03 07:19:52,786 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@64e7619d
2020-12-03 07:19:52,786 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,787 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,789 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@3e44f2a5
2020-12-03 07:19:52,789 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,790 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,790 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52822; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,791 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,792 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,792 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,792 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52822
2020-12-03 07:19:52,793 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52822 Wrote 194 bytes.
2020-12-03 07:19:52,793 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,793 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,794 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,794 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,794 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,794 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,795 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"XkMG1oute59kfpz+vC/sNFIQinlc0duegPyAjxTq\",nc=00000001,cnonce=\"4jXhbvT0ptV1z9Kvqyfe8wfBLXgqcbKXjPrd84eF\",digest-uri=\"/default\",maxbuf=65536,response=ed7a9d1862a4b005f53e16f2371c7745,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,795 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,796 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,796 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,797 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,797 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,797 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,798 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,798 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,798 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52822
2020-12-03 07:19:52,799 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52822 Wrote 64 bytes.
2020-12-03 07:19:52,799 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,800 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,803 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #48 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,804 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,804 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,804 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #48
2020-12-03 07:19:52,805 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#48 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52822 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,805 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,806 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,806 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#48 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52822
2020-12-03 07:19:52,807 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#48 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52822 Wrote 43 bytes.
2020-12-03 07:19:52,807 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #48
2020-12-03 07:19:52,807 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@3e44f2a5
2020-12-03 07:19:52,807 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@3e44f2a5
2020-12-03 07:19:52,808 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@3e44f2a5
2020-12-03 07:19:52,808 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,807 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52822. Number of active connections: 0
2020-12-03 07:19:52,807 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,808 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,809 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,810 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@5456afaa
2020-12-03 07:19:52,810 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,811 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,811 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52826; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,812 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,812 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,813 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,813 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52826
2020-12-03 07:19:52,813 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52826 Wrote 194 bytes.
2020-12-03 07:19:52,814 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,814 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,815 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,815 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,815 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,815 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,816 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"J40aL1LU6T3odxfFTDn7/g/phJfFxke+CLH0jyrq\",nc=00000001,cnonce=\"bHgBw79cVM1IMyEIijOi+dWeXJeWf+N9s71N0D2c\",digest-uri=\"/default\",maxbuf=65536,response=67083ef68da76d9738d21d2553ac1c82,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,816 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,816 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,817 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,817 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,818 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,818 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,818 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,818 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,818 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52826
2020-12-03 07:19:52,818 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52826 Wrote 64 bytes.
2020-12-03 07:19:52,819 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,820 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,821 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #49 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,821 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,822 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,822 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #49
2020-12-03 07:19:52,824 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#49 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52826 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,824 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,825 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,825 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#49 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52826
2020-12-03 07:19:52,825 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#49 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52826 Wrote 43 bytes.
2020-12-03 07:19:52,827 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #49
2020-12-03 07:19:52,827 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,827 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52826. Number of active connections: 0
2020-12-03 07:19:52,827 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@5456afaa
2020-12-03 07:19:52,827 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,828 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@5456afaa
2020-12-03 07:19:52,832 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@5456afaa
2020-12-03 07:19:52,832 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,833 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,834 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4d518b32
2020-12-03 07:19:52,835 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,836 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,837 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52830; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,837 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,838 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,838 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,838 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52830
2020-12-03 07:19:52,839 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52830 Wrote 194 bytes.
2020-12-03 07:19:52,840 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,840 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,841 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,841 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,841 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,841 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,842 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"TtmBjdZ6eZ0rbR3DD7/7cbjs5YidVQx8ASoYjaWT\",nc=00000001,cnonce=\"htMQL5R4frCGbAm/o05cgvIBkRtlDMaQxoFPJssC\",digest-uri=\"/default\",maxbuf=65536,response=f497a6443d74ebb30673ef0cc2c965be,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,843 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,843 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,844 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,844 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,845 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,845 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,845 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,845 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,846 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52830
2020-12-03 07:19:52,846 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52830 Wrote 64 bytes.
2020-12-03 07:19:52,846 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,847 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,847 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #50 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,847 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,848 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,848 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #50
2020-12-03 07:19:52,848 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#50 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52830 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,849 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,850 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,850 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#50 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52830
2020-12-03 07:19:52,850 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#50 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52830 Wrote 43 bytes.
2020-12-03 07:19:52,851 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #50
2020-12-03 07:19:52,851 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4d518b32
2020-12-03 07:19:52,851 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52830. Number of active connections: 0
2020-12-03 07:19:52,851 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,851 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4d518b32
2020-12-03 07:19:52,852 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,852 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4d518b32
2020-12-03 07:19:52,854 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,855 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,857 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@5d43661b
2020-12-03 07:19:52,857 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,857 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,858 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52832; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,858 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,859 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,859 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,860 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52832
2020-12-03 07:19:52,860 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52832 Wrote 194 bytes.
2020-12-03 07:19:52,860 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,861 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,861 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,861 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,862 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,862 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,863 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"zCXirE3J98niXQWyjTykWs1i/paMQhKuxzJLdQwv\",nc=00000001,cnonce=\"mTqs9pXLs4Pj8bKli5ldrfKYQ5AqWbpkYume/7Kr\",digest-uri=\"/default\",maxbuf=65536,response=2a446e9cf9a2e3aaf8603d95588d7581,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,863 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,863 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,864 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,865 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,865 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,865 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,865 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,866 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,866 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52832
2020-12-03 07:19:52,866 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52832 Wrote 64 bytes.
2020-12-03 07:19:52,867 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,868 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,868 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #51 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,869 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,869 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,869 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #51
2020-12-03 07:19:52,870 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#51 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52832 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,870 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,871 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,871 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#51 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52832
2020-12-03 07:19:52,871 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#51 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52832 Wrote 43 bytes.
2020-12-03 07:19:52,872 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #51
2020-12-03 07:19:52,872 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,872 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,874 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52832. Number of active connections: 0
2020-12-03 07:19:52,876 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@5d43661b
2020-12-03 07:19:52,876 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@5d43661b
2020-12-03 07:19:52,876 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@5d43661b
2020-12-03 07:19:52,876 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,877 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,878 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@24c4ddae
2020-12-03 07:19:52,879 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,879 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,880 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52836; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,880 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,881 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,881 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,881 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52836
2020-12-03 07:19:52,882 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52836 Wrote 194 bytes.
2020-12-03 07:19:52,882 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,883 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,883 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,884 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,884 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,884 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,885 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"k9adJxnkdHBdBxUdDi2l6/EbMSLmXJFKGUHCDw6Z\",nc=00000001,cnonce=\"hQEyjnLF9iIm0vKi5Xy4KfSjJEzbWdvJyghBMT5f\",digest-uri=\"/default\",maxbuf=65536,response=236129675f1a7e4d1a71afa0714bc134,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,886 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,886 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,887 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,887 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,888 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,888 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,888 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,888 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,889 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52836
2020-12-03 07:19:52,889 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52836 Wrote 64 bytes.
2020-12-03 07:19:52,889 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,890 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,890 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #52 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,890 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,890 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,891 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #52
2020-12-03 07:19:52,891 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#52 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52836 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,891 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,892 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,892 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#52 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52836
2020-12-03 07:19:52,892 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#52 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52836 Wrote 43 bytes.
2020-12-03 07:19:52,892 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #52
2020-12-03 07:19:52,893 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,893 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,893 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@24c4ddae
2020-12-03 07:19:52,893 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@24c4ddae
2020-12-03 07:19:52,893 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@24c4ddae
2020-12-03 07:19:52,893 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,894 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,893 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52836. Number of active connections: 0
2020-12-03 07:19:52,896 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@43599640
2020-12-03 07:19:52,897 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,897 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,898 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52840; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,898 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,899 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,899 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,899 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52840
2020-12-03 07:19:52,900 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52840 Wrote 194 bytes.
2020-12-03 07:19:52,901 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,901 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,902 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,902 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,902 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,902 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,903 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"A2Wr1m9ZzDuA5ACB2AWzxo61HEwRxB/PD3Jgipay\",nc=00000001,cnonce=\"QLQzJ0I1QZvoO1IaIuWTwA3XNSMLJpZtuJv66XoQ\",digest-uri=\"/default\",maxbuf=65536,response=d27f35d1bc3d3fdfdfb9648a5d91cf5a,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,904 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,904 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,905 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,905 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,905 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,905 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,906 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,906 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,906 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52840
2020-12-03 07:19:52,907 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52840 Wrote 64 bytes.
2020-12-03 07:19:52,907 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,908 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,908 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #53 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,908 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,908 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,909 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #53
2020-12-03 07:19:52,909 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#53 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52840 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,909 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,910 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,910 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#53 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52840
2020-12-03 07:19:52,911 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#53 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52840 Wrote 43 bytes.
2020-12-03 07:19:52,911 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #53
2020-12-03 07:19:52,911 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@43599640
2020-12-03 07:19:52,911 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@43599640
2020-12-03 07:19:52,912 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@43599640
2020-12-03 07:19:52,912 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,911 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,912 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,913 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,914 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@6b58b9e9
2020-12-03 07:19:52,915 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,915 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,916 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52844; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,916 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,911 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52840. Number of active connections: 0
2020-12-03 07:19:52,917 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,917 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,918 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52844
2020-12-03 07:19:52,918 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52844 Wrote 194 bytes.
2020-12-03 07:19:52,924 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,924 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,925 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,925 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,925 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,926 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,926 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"En7IwpLuxYx4uoQbWlSmyEeZYMCfzF/l/arTV7TJ\",nc=00000001,cnonce=\"7UvL0tVop7TtCH+q1sKoGnxByQBIyDuhfF+9m0uV\",digest-uri=\"/default\",maxbuf=65536,response=76e447e50dff77194b8e5e5ac3f4af1a,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,929 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,929 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,930 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,930 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,931 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,931 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,931 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,931 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,931 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52844
2020-12-03 07:19:52,932 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52844 Wrote 64 bytes.
2020-12-03 07:19:52,936 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,944 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #54 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,944 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,948 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,948 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,948 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #54
2020-12-03 07:19:52,949 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#54 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52844 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,949 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,950 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,950 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#54 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52844
2020-12-03 07:19:52,950 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#54 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52844 Wrote 43 bytes.
2020-12-03 07:19:52,950 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #54
2020-12-03 07:19:52,951 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,951 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,952 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@6b58b9e9
2020-12-03 07:19:52,952 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@6b58b9e9
2020-12-03 07:19:52,952 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@6b58b9e9
2020-12-03 07:19:52,952 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,953 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:52,954 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4b5189ac
2020-12-03 07:19:52,955 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,955 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,956 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52846; # active connections: 2; # queued calls: 0
2020-12-03 07:19:52,957 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,960 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52844. Number of active connections: 1
2020-12-03 07:19:52,961 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,961 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,962 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52846
2020-12-03 07:19:52,962 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52846 Wrote 194 bytes.
2020-12-03 07:19:52,962 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,962 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,963 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,963 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,963 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,963 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,964 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"/8vG9nalXExkHiG7AcjdRnW9VmuOr5fMnmS8/uya\",nc=00000001,cnonce=\"t/QoVL3cCKR6z9e/f44KejHa1dRpzfe9l1/t2S+3\",digest-uri=\"/default\",maxbuf=65536,response=f76ec9969722e3d7583ffe86ecd5b905,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,966 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,966 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,967 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,968 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,968 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,968 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,968 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,968 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,969 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52846
2020-12-03 07:19:52,969 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52846 Wrote 64 bytes.
2020-12-03 07:19:52,969 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,970 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:52,970 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #55 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,971 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,971 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,971 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #55
2020-12-03 07:19:52,972 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#55 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52846 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,972 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,973 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:52,973 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#55 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52846
2020-12-03 07:19:52,973 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#55 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52846 Wrote 43 bytes.
2020-12-03 07:19:52,973 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #55
2020-12-03 07:19:52,973 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4b5189ac
2020-12-03 07:19:52,973 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52846. Number of active connections: 0
2020-12-03 07:19:52,973 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:52,974 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4b5189ac
2020-12-03 07:19:52,974 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:52,974 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4b5189ac
2020-12-03 07:19:52,974 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:52,975 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:52,975 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@2b9ed6da
2020-12-03 07:19:52,976 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:52,976 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:52,977 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52848; # active connections: 1; # queued calls: 0
2020-12-03 07:19:52,977 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:52,978 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,978 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:52,978 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52848
2020-12-03 07:19:52,979 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52848 Wrote 194 bytes.
2020-12-03 07:19:52,979 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:52,979 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:52,980 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:52,980 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:52,980 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:52,981 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:52,981 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"Xk/a4mEuD2CDNDpzxXESBnFZoFaFBS8YBPwqazk0\",nc=00000001,cnonce=\"PDQCcA/CIFRgW3btksIzFd9XBVQ7tsHTMmd+FtJh\",digest-uri=\"/default\",maxbuf=65536,response=69447fa556d4e3143cd7cd23a881a55d,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:52,982 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:52,982 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:52,983 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:52,983 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:52,983 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:52,983 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:52,984 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:52,984 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:52,984 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52848
2020-12-03 07:19:52,984 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52848 Wrote 64 bytes.
2020-12-03 07:19:52,985 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:52,997 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #56 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:52,998 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:52,998 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:52,998 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #56
2020-12-03 07:19:52,999 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#56 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52848 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:52,999 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:52,999 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,000 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,001 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#56 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52848
2020-12-03 07:19:53,001 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#56 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52848 Wrote 43 bytes.
2020-12-03 07:19:53,002 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #56
2020-12-03 07:19:53,002 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@2b9ed6da
2020-12-03 07:19:53,003 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,003 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,003 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@2b9ed6da
2020-12-03 07:19:53,002 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52848. Number of active connections: 0
2020-12-03 07:19:53,003 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@2b9ed6da
2020-12-03 07:19:53,003 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,004 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,005 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@78a773fd
2020-12-03 07:19:53,005 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,006 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,006 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52850; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,006 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,007 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,007 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,007 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52850
2020-12-03 07:19:53,008 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52850 Wrote 194 bytes.
2020-12-03 07:19:53,008 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,008 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,008 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,009 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,009 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,009 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,010 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"Rn6GEeaSfb5ayZEmzdVCPXauSHsUUyUZqGpSKIcX\",nc=00000001,cnonce=\"uETAQVgnsshoS+gPLvFe0FSVI5JWT43PoMLVEqY+\",digest-uri=\"/default\",maxbuf=65536,response=865faa8029c31d62e4fb22f33b7f6d84,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,010 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,010 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,011 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,011 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,012 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,012 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,012 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,012 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,012 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52850
2020-12-03 07:19:53,013 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52850 Wrote 64 bytes.
2020-12-03 07:19:53,016 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,021 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,021 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #57 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,022 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,022 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,022 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #57
2020-12-03 07:19:53,024 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#57 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52850 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,024 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,025 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,026 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#57 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52850
2020-12-03 07:19:53,026 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#57 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52850 Wrote 43 bytes.
2020-12-03 07:19:53,026 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #57
2020-12-03 07:19:53,026 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52850. Number of active connections: 0
2020-12-03 07:19:53,027 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,027 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,033 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@78a773fd
2020-12-03 07:19:53,034 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@78a773fd
2020-12-03 07:19:53,034 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@78a773fd
2020-12-03 07:19:53,034 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,035 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,036 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4167d97b
2020-12-03 07:19:53,037 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,037 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,038 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52852; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,038 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,039 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,039 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,039 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52852
2020-12-03 07:19:53,039 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52852 Wrote 194 bytes.
2020-12-03 07:19:53,040 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,040 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,040 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,041 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,041 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,041 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,042 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"YKI8DI/IdWIEOybGTljYAI1UcdtNyBcNGrMVrPMZ\",nc=00000001,cnonce=\"xCME5o5LylQxgpspyeflncTq5s2Pfr3hyhPuILOx\",digest-uri=\"/default\",maxbuf=65536,response=16f148398f908c16625b2cfb8718260d,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,042 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,042 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,043 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,043 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,043 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,043 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,044 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,044 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,044 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52852
2020-12-03 07:19:53,044 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52852 Wrote 64 bytes.
2020-12-03 07:19:53,044 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,045 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,045 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #58 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,047 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,047 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,047 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #58
2020-12-03 07:19:53,047 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#58 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52852 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,047 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,049 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,049 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#58 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52852
2020-12-03 07:19:53,049 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#58 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52852 Wrote 43 bytes.
2020-12-03 07:19:53,050 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #58
2020-12-03 07:19:53,050 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,050 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52852. Number of active connections: 0
2020-12-03 07:19:53,050 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4167d97b
2020-12-03 07:19:53,050 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,051 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4167d97b
2020-12-03 07:19:53,051 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4167d97b
2020-12-03 07:19:53,051 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,052 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,054 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4fbe37eb
2020-12-03 07:19:53,054 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,054 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,055 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52856; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,055 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,057 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,057 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,057 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52856
2020-12-03 07:19:53,057 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52856 Wrote 194 bytes.
2020-12-03 07:19:53,058 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,058 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,058 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,059 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,059 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,059 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,060 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"Ac3Ue6YdCT2JZ7oJhgDPi3ERpaFdx3laGOluq4Di\",nc=00000001,cnonce=\"pQKDhKWuPgQn3ZfG5/H+idkrIj52qO/hx4hQFFMg\",digest-uri=\"/default\",maxbuf=65536,response=04845ff0b40867ba01249577b0967a22,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,060 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,061 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,061 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,061 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,062 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,062 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,062 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,062 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,062 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52856
2020-12-03 07:19:53,062 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52856 Wrote 64 bytes.
2020-12-03 07:19:53,063 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,064 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,064 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #59 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,065 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,066 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,066 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #59
2020-12-03 07:19:53,067 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#59 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52856 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,067 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,068 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,069 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#59 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52856
2020-12-03 07:19:53,069 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#59 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52856 Wrote 43 bytes.
2020-12-03 07:19:53,069 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #59
2020-12-03 07:19:53,069 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,069 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4fbe37eb
2020-12-03 07:19:53,070 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4fbe37eb
2020-12-03 07:19:53,070 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4fbe37eb
2020-12-03 07:19:53,070 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,069 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52856. Number of active connections: 0
2020-12-03 07:19:53,071 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:53,072 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@6fa34d52
2020-12-03 07:19:53,072 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,072 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,073 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52860; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,074 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,074 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,075 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,075 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52860
2020-12-03 07:19:53,075 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52860 Wrote 194 bytes.
2020-12-03 07:19:53,069 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,075 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,076 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,077 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,077 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,077 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,077 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,078 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"rV9BkZBFmV8CSb3C/EvrusoNalC92do8AS4de/xe\",nc=00000001,cnonce=\"n2CT8mRDs0COu4stepJJUuDq5KMPsvN3hye0Z3W1\",digest-uri=\"/default\",maxbuf=65536,response=8a262cdb111562fdd395b82972594ad9,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,078 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,078 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,079 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,079 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,079 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,079 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,080 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,080 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,080 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52860
2020-12-03 07:19:53,080 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52860 Wrote 64 bytes.
2020-12-03 07:19:53,080 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,081 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,087 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #60 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,088 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,089 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,089 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #60
2020-12-03 07:19:53,091 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#60 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52860 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,091 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,092 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,093 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#60 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52860
2020-12-03 07:19:53,094 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#60 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52860 Wrote 43 bytes.
2020-12-03 07:19:53,096 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #60
2020-12-03 07:19:53,096 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,096 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52860. Number of active connections: 0
2020-12-03 07:19:53,096 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,097 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@6fa34d52
2020-12-03 07:19:53,097 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@6fa34d52
2020-12-03 07:19:53,097 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@6fa34d52
2020-12-03 07:19:53,097 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,098 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,099 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4032d386
2020-12-03 07:19:53,100 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,100 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,101 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52864; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,102 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,102 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,103 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,103 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52864
2020-12-03 07:19:53,103 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52864 Wrote 194 bytes.
2020-12-03 07:19:53,103 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,104 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,104 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,104 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,104 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,105 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,106 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"MAhZXM88/o/iAizuzkyL2ryEyrBQ+dMUB5S9Q9pt\",nc=00000001,cnonce=\"w3IKPXrhXGJ4suGHbDleLN3P1qTRUL2yAqMju7tc\",digest-uri=\"/default\",maxbuf=65536,response=34e8c409c7d2a4d4b0d96985d0660df7,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,108 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,108 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,109 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,109 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,109 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,110 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,110 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,110 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,110 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52864
2020-12-03 07:19:53,111 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52864 Wrote 64 bytes.
2020-12-03 07:19:53,111 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,114 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,115 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #61 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,123 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,124 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,124 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #61
2020-12-03 07:19:53,126 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#61 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52864 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,127 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,129 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,136 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#61 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52864
2020-12-03 07:19:53,136 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#61 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52864 Wrote 43 bytes.
2020-12-03 07:19:53,136 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #61
2020-12-03 07:19:53,137 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,137 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,137 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4032d386
2020-12-03 07:19:53,137 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4032d386
2020-12-03 07:19:53,138 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4032d386
2020-12-03 07:19:53,138 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,139 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:53,139 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52864. Number of active connections: 0
2020-12-03 07:19:53,140 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@3eb81efb
2020-12-03 07:19:53,141 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,141 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,142 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52868; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,142 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,143 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,143 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,143 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52868
2020-12-03 07:19:53,143 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52868 Wrote 194 bytes.
2020-12-03 07:19:53,144 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,144 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,145 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,145 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,145 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,145 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,146 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"O5h2RkPxgIPpleG4bhNlYb0z2idQ3FqRoD6H0b6e\",nc=00000001,cnonce=\"H16IFSlMSoZL8614He8u1Mo6FAxk1fA6VqP15N3w\",digest-uri=\"/default\",maxbuf=65536,response=0fb37cba82c6c197bbdebe0802accf86,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,148 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,148 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,149 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,149 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,149 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,149 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,150 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,150 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,150 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52868
2020-12-03 07:19:53,150 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52868 Wrote 64 bytes.
2020-12-03 07:19:53,152 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,153 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,153 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #62 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,154 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,154 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,154 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #62
2020-12-03 07:19:53,155 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#62 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52868 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,155 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,156 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,156 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#62 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52868
2020-12-03 07:19:53,156 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#62 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52868 Wrote 43 bytes.
2020-12-03 07:19:53,157 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #62
2020-12-03 07:19:53,157 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,157 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@3eb81efb
2020-12-03 07:19:53,157 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,157 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52868. Number of active connections: 0
2020-12-03 07:19:53,157 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@3eb81efb
2020-12-03 07:19:53,158 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@3eb81efb
2020-12-03 07:19:53,158 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,159 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,160 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@5170bcf4
2020-12-03 07:19:53,161 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,161 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,162 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52872; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,162 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,163 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,163 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,163 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52872
2020-12-03 07:19:53,164 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52872 Wrote 194 bytes.
2020-12-03 07:19:53,164 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,164 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,164 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,165 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,165 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,165 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,167 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"PD5OPC9zuqptzI3/ziMV1nbPVUMBL4EZicXQ+153\",nc=00000001,cnonce=\"Mv+u+BbZ8qBhB2AYvLBW6Nr5P26nUVIRV8F2RuVS\",digest-uri=\"/default\",maxbuf=65536,response=acb3090ba4217af8660a0121ed68ba6e,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,168 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,168 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,168 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,183 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,183 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,184 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,184 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,184 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,184 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52872
2020-12-03 07:19:53,184 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52872 Wrote 64 bytes.
2020-12-03 07:19:53,185 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,186 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,186 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #63 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,190 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,190 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,191 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #63
2020-12-03 07:19:53,191 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#63 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52872 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,191 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,215 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,216 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#63 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52872
2020-12-03 07:19:53,216 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#63 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52872 Wrote 43 bytes.
2020-12-03 07:19:53,216 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #63
2020-12-03 07:19:53,216 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,217 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@5170bcf4
2020-12-03 07:19:53,217 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@5170bcf4
2020-12-03 07:19:53,217 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@5170bcf4
2020-12-03 07:19:53,217 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,217 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,218 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:53,220 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@19e7a160
2020-12-03 07:19:53,220 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,217 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52872. Number of active connections: 0
2020-12-03 07:19:53,222 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,222 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52880; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,223 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,223 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,223 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,224 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52880
2020-12-03 07:19:53,224 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52880 Wrote 194 bytes.
2020-12-03 07:19:53,224 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,225 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,225 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,226 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,226 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,226 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,227 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"Ug8FZs1osgVbwcqKSKWqsMBwENhFGfNkGtZDq7Wb\",nc=00000001,cnonce=\"CnnaHxoKnj+2iC0ghuO5eIdW5/sDxGoQ5spx0ceg\",digest-uri=\"/default\",maxbuf=65536,response=caec007d4728b1b93d8f10838259bf45,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,227 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,228 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,228 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,229 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,229 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,229 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,229 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,229 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,230 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52880
2020-12-03 07:19:53,230 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52880 Wrote 64 bytes.
2020-12-03 07:19:53,230 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,245 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,245 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #64 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,247 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,247 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,248 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #64
2020-12-03 07:19:53,248 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#64 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52880 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,248 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,250 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,250 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#64 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52880
2020-12-03 07:19:53,250 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#64 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52880 Wrote 43 bytes.
2020-12-03 07:19:53,251 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #64
2020-12-03 07:19:53,251 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,251 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52880. Number of active connections: 0
2020-12-03 07:19:53,251 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@19e7a160
2020-12-03 07:19:53,252 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@19e7a160
2020-12-03 07:19:53,252 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@19e7a160
2020-12-03 07:19:53,252 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,251 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,253 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,254 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@7e19ebf0
2020-12-03 07:19:53,254 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,255 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,255 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52884; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,256 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,256 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,256 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,257 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52884
2020-12-03 07:19:53,257 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52884 Wrote 194 bytes.
2020-12-03 07:19:53,257 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,258 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,259 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,259 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,259 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,259 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,260 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"8mU2cjkWtbWOG5Vh0TeTpZjWSJt0fE2bqs8bG1Sh\",nc=00000001,cnonce=\"2ogZfUP1+4bdMr/Pq9Y2oWPfzyoQAElZJDuh49aq\",digest-uri=\"/default\",maxbuf=65536,response=da6e7a9e3e1e88d7f6b2877ef3584ca2,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,261 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,261 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,261 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,262 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,262 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,262 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,262 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,262 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,263 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52884
2020-12-03 07:19:53,263 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52884 Wrote 64 bytes.
2020-12-03 07:19:53,263 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,264 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,264 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #65 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,265 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,266 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,266 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #65
2020-12-03 07:19:53,266 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#65 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52884 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,266 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,267 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,268 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#65 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52884
2020-12-03 07:19:53,268 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#65 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52884 Wrote 43 bytes.
2020-12-03 07:19:53,268 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #65
2020-12-03 07:19:53,268 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,268 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52884. Number of active connections: 0
2020-12-03 07:19:53,268 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,273 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@7e19ebf0
2020-12-03 07:19:53,274 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@7e19ebf0
2020-12-03 07:19:53,274 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@7e19ebf0
2020-12-03 07:19:53,274 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,274 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,276 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@39d9314d
2020-12-03 07:19:53,276 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,276 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,277 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52890; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,277 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,279 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,279 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,279 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52890
2020-12-03 07:19:53,280 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52890 Wrote 194 bytes.
2020-12-03 07:19:53,280 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,280 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,281 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,281 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,281 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,281 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,281 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"TcEUIs3owrmCYcNsuwivx0O/tAh0Sw5mMEGRPogP\",nc=00000001,cnonce=\"4qJ7WEH1SjPnie1d6pNS50Dz6ioQUFvphtOjjx7s\",digest-uri=\"/default\",maxbuf=65536,response=65b675bb3a12b38eb80d4fca79d4d208,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,282 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,282 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,283 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,283 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,283 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,283 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,283 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,284 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,284 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52890
2020-12-03 07:19:53,284 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52890 Wrote 64 bytes.
2020-12-03 07:19:53,285 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,288 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,289 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #66 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,290 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,290 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,290 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #66
2020-12-03 07:19:53,291 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#66 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52890 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,292 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,293 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,293 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#66 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52890
2020-12-03 07:19:53,293 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#66 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52890 Wrote 43 bytes.
2020-12-03 07:19:53,294 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #66
2020-12-03 07:19:53,294 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,294 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52890. Number of active connections: 0
2020-12-03 07:19:53,294 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,294 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@39d9314d
2020-12-03 07:19:53,294 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@39d9314d
2020-12-03 07:19:53,295 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@39d9314d
2020-12-03 07:19:53,295 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,296 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,297 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@11f0a5a1
2020-12-03 07:19:53,298 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,298 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,298 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52894; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,299 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,299 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,300 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,300 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52894
2020-12-03 07:19:53,300 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52894 Wrote 194 bytes.
2020-12-03 07:19:53,300 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,301 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,301 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,302 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,302 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,302 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,303 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"4KfJBaEyR4ONg5MjdvKXYgI/aou8Jr+cbWJZOBE5\",nc=00000001,cnonce=\"G0JtcKDW1TGtgZ1M88Ml7oOgaLlDg4MtQFgqhgRB\",digest-uri=\"/default\",maxbuf=65536,response=94dc93ef4c71408267175feb29ae1d97,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,307 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,307 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,308 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,308 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,309 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,309 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,309 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,309 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,309 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52894
2020-12-03 07:19:53,309 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52894 Wrote 64 bytes.
2020-12-03 07:19:53,310 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,311 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,311 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #67 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,312 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,312 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,312 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #67
2020-12-03 07:19:53,316 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#67 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52894 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,316 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,317 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,317 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#67 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52894
2020-12-03 07:19:53,317 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#67 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52894 Wrote 43 bytes.
2020-12-03 07:19:53,317 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #67
2020-12-03 07:19:53,318 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,318 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@11f0a5a1
2020-12-03 07:19:53,318 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52894. Number of active connections: 0
2020-12-03 07:19:53,318 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@11f0a5a1
2020-12-03 07:19:53,318 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,318 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@11f0a5a1
2020-12-03 07:19:53,319 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,319 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,321 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@18e36d14
2020-12-03 07:19:53,321 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,321 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,322 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,324 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52898; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,324 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,324 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,325 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52898
2020-12-03 07:19:53,325 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52898 Wrote 194 bytes.
2020-12-03 07:19:53,325 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,326 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,326 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,326 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,326 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,326 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,327 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"tDppIJ6UNWDvioQEV0tvRL5AMWhIelnplODNUAUI\",nc=00000001,cnonce=\"L+FIvJUnhi3nQJDueStaFP7n06MBWDEQ7lkXcTok\",digest-uri=\"/default\",maxbuf=65536,response=aad0e5d9c9f5e928f8ba5618966f9808,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,327 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,328 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,328 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,328 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,329 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,329 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,329 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,329 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,329 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52898
2020-12-03 07:19:53,329 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52898 Wrote 64 bytes.
2020-12-03 07:19:53,329 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,330 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,330 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #68 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,331 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,331 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,331 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #68
2020-12-03 07:19:53,332 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#68 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52898 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,332 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,333 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,333 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#68 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52898
2020-12-03 07:19:53,333 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#68 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52898 Wrote 43 bytes.
2020-12-03 07:19:53,333 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #68
2020-12-03 07:19:53,334 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@18e36d14
2020-12-03 07:19:53,334 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@18e36d14
2020-12-03 07:19:53,334 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,334 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,334 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52898. Number of active connections: 0
2020-12-03 07:19:53,334 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@18e36d14
2020-12-03 07:19:53,334 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,335 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,336 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@6853425f
2020-12-03 07:19:53,336 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,337 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,337 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,338 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52902; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,338 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,338 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,338 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52902
2020-12-03 07:19:53,339 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52902 Wrote 194 bytes.
2020-12-03 07:19:53,339 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,339 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,339 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,340 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,340 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,340 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,340 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"RQ5+1aAcCAzsuT9g63ZwMBI8VylUO2zDGIQR3VcG\",nc=00000001,cnonce=\"j3MHz0ayVTjd/KMl/3heCzjkCFltFiltcfvDx2Uo\",digest-uri=\"/default\",maxbuf=65536,response=7026a69fbd61afca514e9eb9184a735d,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,341 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,341 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,341 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,342 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,342 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,342 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,342 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,342 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,342 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52902
2020-12-03 07:19:53,342 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52902 Wrote 64 bytes.
2020-12-03 07:19:53,342 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,343 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,343 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #69 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,344 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,344 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,344 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #69
2020-12-03 07:19:53,345 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#69 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52902 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,345 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,346 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,349 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#69 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52902
2020-12-03 07:19:53,349 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#69 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52902 Wrote 43 bytes.
2020-12-03 07:19:53,350 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #69
2020-12-03 07:19:53,350 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,350 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@6853425f
2020-12-03 07:19:53,350 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@6853425f
2020-12-03 07:19:53,350 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52902. Number of active connections: 0
2020-12-03 07:19:53,350 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,351 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@6853425f
2020-12-03 07:19:53,351 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,352 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,353 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@5965be2d
2020-12-03 07:19:53,354 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,354 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,355 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52908; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,355 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,355 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,356 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,356 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52908
2020-12-03 07:19:53,356 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52908 Wrote 194 bytes.
2020-12-03 07:19:53,356 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,357 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,357 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,357 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,358 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,358 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,358 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"fLujeNaz+tKB8E47Y+tGN9MzGHx2o3DdVhl7Di1A\",nc=00000001,cnonce=\"kY4lxWpOG/EguXTRhe5woORvFjDxIUguZs+1dLBT\",digest-uri=\"/default\",maxbuf=65536,response=d289fedda8adfce51f10d62a590392ff,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,359 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,359 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,359 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,360 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,360 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,360 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,360 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,360 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,360 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52908
2020-12-03 07:19:53,360 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52908 Wrote 64 bytes.
2020-12-03 07:19:53,361 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,361 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,362 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #70 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,363 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,363 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,363 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #70
2020-12-03 07:19:53,365 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#70 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52908 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,365 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,367 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,367 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#70 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52908
2020-12-03 07:19:53,368 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#70 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52908 Wrote 43 bytes.
2020-12-03 07:19:53,368 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #70
2020-12-03 07:19:53,368 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@5965be2d
2020-12-03 07:19:53,368 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52908. Number of active connections: 0
2020-12-03 07:19:53,368 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,368 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,368 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@5965be2d
2020-12-03 07:19:53,369 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@5965be2d
2020-12-03 07:19:53,369 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,369 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,370 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@41005828
2020-12-03 07:19:53,371 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,371 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,372 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52910; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,372 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,372 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,372 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,373 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52910
2020-12-03 07:19:53,373 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52910 Wrote 194 bytes.
2020-12-03 07:19:53,373 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,373 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,374 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,374 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,374 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,375 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,375 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"bgg9gK6WbutEYlzX5jlKrC90cpGctyoo2d1QJwDg\",nc=00000001,cnonce=\"XKGvAZMv9SWEBlWu41YoiAtXa6qDqVAgra2F9vyR\",digest-uri=\"/default\",maxbuf=65536,response=7c7b44185dda0d7781677f0edfc5b4d8,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,376 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,376 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,376 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,376 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,377 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,377 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,377 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,377 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,377 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52910
2020-12-03 07:19:53,377 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52910 Wrote 64 bytes.
2020-12-03 07:19:53,377 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,378 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,379 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #71 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,380 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,381 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,381 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #71
2020-12-03 07:19:53,381 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#71 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52910 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,382 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,382 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,383 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#71 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52910
2020-12-03 07:19:53,383 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#71 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52910 Wrote 43 bytes.
2020-12-03 07:19:53,383 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #71
2020-12-03 07:19:53,383 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@41005828
2020-12-03 07:19:53,383 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52910. Number of active connections: 0
2020-12-03 07:19:53,383 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,384 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@41005828
2020-12-03 07:19:53,384 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,384 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@41005828
2020-12-03 07:19:53,384 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,385 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,386 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@488d1cd7
2020-12-03 07:19:53,387 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,387 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,388 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52914; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,388 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,388 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,388 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,389 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52914
2020-12-03 07:19:53,389 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52914 Wrote 194 bytes.
2020-12-03 07:19:53,389 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,390 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,390 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,390 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,391 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,391 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,391 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"JIpAOVyEUMSOFr5SRLj50Z7ukCrk93IUCasqMbk8\",nc=00000001,cnonce=\"PPSzWeWnXqe/d5Bo8B80QQOAhUKcEJkRPeyB7RTL\",digest-uri=\"/default\",maxbuf=65536,response=762afc800a7d1807b1c6b6ff9fc03c0c,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,392 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,392 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,393 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,393 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,394 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,394 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,394 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,394 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,394 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52914
2020-12-03 07:19:53,395 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52914 Wrote 64 bytes.
2020-12-03 07:19:53,395 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,396 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,396 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #72 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,400 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,400 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,400 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #72
2020-12-03 07:19:53,404 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#72 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52914 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,404 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,405 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,405 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#72 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52914
2020-12-03 07:19:53,405 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#72 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52914 Wrote 43 bytes.
2020-12-03 07:19:53,405 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #72
2020-12-03 07:19:53,406 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,406 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@488d1cd7
2020-12-03 07:19:53,406 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52914. Number of active connections: 0
2020-12-03 07:19:53,406 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,406 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@488d1cd7
2020-12-03 07:19:53,406 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@488d1cd7
2020-12-03 07:19:53,407 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,407 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,409 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@436c81a3
2020-12-03 07:19:53,409 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,409 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,410 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52920; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,410 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,411 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,411 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,412 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52920
2020-12-03 07:19:53,412 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52920 Wrote 194 bytes.
2020-12-03 07:19:53,412 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,412 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,413 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,413 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,413 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,413 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,414 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"fQUnzSGViZ/2e+wmNJPCvCqbyKQ6DSH/jLq2ZdiG\",nc=00000001,cnonce=\"VKfoLAYMBtuIfCFS4E3q1F45oDDzVYkCMn17wRnh\",digest-uri=\"/default\",maxbuf=65536,response=b3a60771d4666513b7caf806dce00f99,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,414 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,414 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,414 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,415 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,415 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,415 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,415 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,415 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,415 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52920
2020-12-03 07:19:53,415 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52920 Wrote 64 bytes.
2020-12-03 07:19:53,416 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,416 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,420 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #73 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,420 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,421 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,421 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #73
2020-12-03 07:19:53,423 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#73 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52920 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,423 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,425 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,426 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#73 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52920
2020-12-03 07:19:53,426 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#73 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52920 Wrote 43 bytes.
2020-12-03 07:19:53,426 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #73
2020-12-03 07:19:53,426 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@436c81a3
2020-12-03 07:19:53,427 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@436c81a3
2020-12-03 07:19:53,427 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@436c81a3
2020-12-03 07:19:53,427 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,428 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:53,429 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@59cba5a
2020-12-03 07:19:53,430 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,430 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,430 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52924; # active connections: 2; # queued calls: 0
2020-12-03 07:19:53,431 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,426 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,431 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,431 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52920. Number of active connections: 1
2020-12-03 07:19:53,432 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,432 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,432 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52924
2020-12-03 07:19:53,432 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52924 Wrote 194 bytes.
2020-12-03 07:19:53,433 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,433 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,434 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,434 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,434 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,434 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,435 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"1CL7YtWbKCJSVq65H2/0EAZAEWr6gnQZ/So1oslE\",nc=00000001,cnonce=\"dBS9zPibJ8F7OCvquLOTWBy8XHBG6KUIwiVsBKxu\",digest-uri=\"/default\",maxbuf=65536,response=96fc61f2498d39c831187a76a2fa3e0b,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,435 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,436 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,436 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,437 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,437 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,437 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,437 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,437 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,437 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52924
2020-12-03 07:19:53,438 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52924 Wrote 64 bytes.
2020-12-03 07:19:53,438 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,440 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,441 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #74 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,446 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,446 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,446 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #74
2020-12-03 07:19:53,448 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#74 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52924 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,448 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,449 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,450 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#74 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52924
2020-12-03 07:19:53,450 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#74 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52924 Wrote 43 bytes.
2020-12-03 07:19:53,451 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #74
2020-12-03 07:19:53,451 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@59cba5a
2020-12-03 07:19:53,451 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,451 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,451 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@59cba5a
2020-12-03 07:19:53,451 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@59cba5a
2020-12-03 07:19:53,452 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,452 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:53,453 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@41ab013
2020-12-03 07:19:53,454 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,455 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52924. Number of active connections: 0
2020-12-03 07:19:53,456 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,457 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,457 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52928; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,457 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,458 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,458 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52928
2020-12-03 07:19:53,458 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52928 Wrote 194 bytes.
2020-12-03 07:19:53,458 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,459 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,459 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,459 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,460 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,460 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,460 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"83Di6h7Sdsu9XzU++X2IarJ2W5BvLJae1hf2yKlq\",nc=00000001,cnonce=\"LF9UnhFyy6361dFSqa50s9zsoVt9u5wmkxIidrYI\",digest-uri=\"/default\",maxbuf=65536,response=5e6c829bb87a46245bcc760f76d54054,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,461 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,461 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,461 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,462 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,462 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,462 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,462 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,462 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,463 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52928
2020-12-03 07:19:53,463 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52928 Wrote 64 bytes.
2020-12-03 07:19:53,463 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,464 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,468 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #75 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,469 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,469 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,470 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #75
2020-12-03 07:19:53,470 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#75 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52928 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,470 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,471 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,472 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#75 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52928
2020-12-03 07:19:53,472 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#75 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52928 Wrote 43 bytes.
2020-12-03 07:19:53,472 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #75
2020-12-03 07:19:53,472 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@41ab013
2020-12-03 07:19:53,473 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@41ab013
2020-12-03 07:19:53,473 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@41ab013
2020-12-03 07:19:53,473 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,474 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:165
2020-12-03 07:19:53,475 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@54eb2b70
2020-12-03 07:19:53,476 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,476 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,476 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,476 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52928. Number of active connections: 0
2020-12-03 07:19:53,477 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52932; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,476 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,477 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,477 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,477 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,478 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52932
2020-12-03 07:19:53,478 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52932 Wrote 194 bytes.
2020-12-03 07:19:53,478 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,478 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,479 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,479 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,479 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,479 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,480 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"9qButWhdz+Prop+70xBZhy8YYfi0Uro0sQnGh95i\",nc=00000001,cnonce=\"eD3Yi8SLonyG7yI2FrXXudiW47whNGWK5Wga99xv\",digest-uri=\"/default\",maxbuf=65536,response=ff99b96ba896b328b41881ae6a8abf24,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,480 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,480 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,481 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,481 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,482 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,482 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,482 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,482 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,482 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52932
2020-12-03 07:19:53,482 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52932 Wrote 64 bytes.
2020-12-03 07:19:53,483 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,484 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,484 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #76 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,485 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,485 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,485 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #76
2020-12-03 07:19:53,485 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#76 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52932 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,486 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,486 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,487 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#76 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52932
2020-12-03 07:19:53,487 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#76 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52932 Wrote 43 bytes.
2020-12-03 07:19:53,487 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #76
2020-12-03 07:19:53,488 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52932. Number of active connections: 0
2020-12-03 07:19:53,488 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,488 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,490 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@54eb2b70
2020-12-03 07:19:53,491 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@54eb2b70
2020-12-03 07:19:53,491 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@54eb2b70
2020-12-03 07:19:53,491 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,492 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,493 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4241e0f4
2020-12-03 07:19:53,493 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,494 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,494 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52936; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,495 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,495 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,495 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,495 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52936
2020-12-03 07:19:53,496 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52936 Wrote 194 bytes.
2020-12-03 07:19:53,496 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,496 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,496 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,497 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,497 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,497 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,498 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"1hh7hvEeBT9GzHYWXSAS+Lj/Hw8HR0ZyiPp6XyW7\",nc=00000001,cnonce=\"7z19N1U9m0e26fXD3e5PhQMZeMR556SRcJEqz2eX\",digest-uri=\"/default\",maxbuf=65536,response=c547e722bf2daafdde0dbcf7c67c4000,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,498 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,498 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,499 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,499 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,499 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,499 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,499 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,499 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,500 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52936
2020-12-03 07:19:53,500 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52936 Wrote 64 bytes.
2020-12-03 07:19:53,500 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,516 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #77 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,516 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,516 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,518 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,518 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #77
2020-12-03 07:19:53,518 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#77 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52936 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,518 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,519 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,519 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#77 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52936
2020-12-03 07:19:53,520 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#77 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52936 Wrote 43 bytes.
2020-12-03 07:19:53,520 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #77
2020-12-03 07:19:53,520 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,520 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4241e0f4
2020-12-03 07:19:53,520 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,520 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52936. Number of active connections: 0
2020-12-03 07:19:53,520 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4241e0f4
2020-12-03 07:19:53,521 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4241e0f4
2020-12-03 07:19:53,521 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,522 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,523 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@3688eb5b
2020-12-03 07:19:53,523 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,524 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,524 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52940; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,524 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,525 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,525 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,525 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52940
2020-12-03 07:19:53,525 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52940 Wrote 194 bytes.
2020-12-03 07:19:53,525 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,526 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,526 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,526 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,527 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,527 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,527 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"ryxi1N3leHuYG3fKZfWYLeZ5ZB1bHmM5XqTtcLr/\",nc=00000001,cnonce=\"7KAsEltg3uP8iHHBoSo7PE1MHXZfmYgGQnnUwVt+\",digest-uri=\"/default\",maxbuf=65536,response=2ae808fc52d50ecc868e6586803aa190,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,528 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,528 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,529 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,529 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,529 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,529 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,529 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,529 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,530 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52940
2020-12-03 07:19:53,530 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52940 Wrote 64 bytes.
2020-12-03 07:19:53,530 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,531 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,531 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #78 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,533 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,533 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,533 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #78
2020-12-03 07:19:53,533 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#78 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52940 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,533 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,534 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,537 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#78 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52940
2020-12-03 07:19:53,537 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#78 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52940 Wrote 43 bytes.
2020-12-03 07:19:53,538 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #78
2020-12-03 07:19:53,538 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,538 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,540 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@3688eb5b
2020-12-03 07:19:53,540 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@3688eb5b
2020-12-03 07:19:53,540 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@3688eb5b
2020-12-03 07:19:53,540 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,541 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52940. Number of active connections: 0
2020-12-03 07:19:53,541 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:167
2020-12-03 07:19:53,548 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@432038ec
2020-12-03 07:19:53,549 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,549 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,555 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52944; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,556 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,560 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,560 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,560 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52944
2020-12-03 07:19:53,560 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52944 Wrote 194 bytes.
2020-12-03 07:19:53,561 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,561 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,561 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,562 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,562 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,562 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,562 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"JmpvcFTk/nvPjCoQvzzP2ZrzjkL5yvamT9B0rCqs\",nc=00000001,cnonce=\"MrVyIN3+kKiF+tYog7AqcPQKivLjcu1f6/ddKS0i\",digest-uri=\"/default\",maxbuf=65536,response=0ada3c0f8c3955469be297eda4d53951,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,565 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,565 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,566 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,566 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,566 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,566 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,566 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,566 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,567 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52944
2020-12-03 07:19:53,567 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52944 Wrote 64 bytes.
2020-12-03 07:19:53,567 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,574 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,575 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #79 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,584 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,584 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,584 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #79
2020-12-03 07:19:53,588 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#79 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52944 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,588 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,588 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,592 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#79 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52944
2020-12-03 07:19:53,592 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#79 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52944 Wrote 43 bytes.
2020-12-03 07:19:53,593 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #79
2020-12-03 07:19:53,593 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,593 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@432038ec
2020-12-03 07:19:53,593 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52944. Number of active connections: 0
2020-12-03 07:19:53,593 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,593 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@432038ec
2020-12-03 07:19:53,594 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@432038ec
2020-12-03 07:19:53,594 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,595 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,596 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@5ef5c734
2020-12-03 07:19:53,596 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,596 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,597 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52952; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,597 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,597 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,598 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,598 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52952
2020-12-03 07:19:53,598 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52952 Wrote 194 bytes.
2020-12-03 07:19:53,598 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,599 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,599 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,599 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,599 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,599 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,600 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"SGkJm4PWiekRt0dCGHUMJxuthN2Ua8AN7Uzf9XxC\",nc=00000001,cnonce=\"9vj6o7o9C+XprctxvZdwn7uCcvElHJMyrBAv5Nmt\",digest-uri=\"/default\",maxbuf=65536,response=f8c0936a58cc4642e905b05007a4742c,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,600 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,600 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,601 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,601 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,602 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,602 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,602 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,602 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,602 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52952
2020-12-03 07:19:53,602 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52952 Wrote 64 bytes.
2020-12-03 07:19:53,604 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,604 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,605 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #80 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,606 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,606 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,606 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #80
2020-12-03 07:19:53,607 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#80 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52952 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,607 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,607 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,608 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#80 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52952
2020-12-03 07:19:53,608 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#80 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52952 Wrote 43 bytes.
2020-12-03 07:19:53,608 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #80
2020-12-03 07:19:53,608 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@5ef5c734
2020-12-03 07:19:53,608 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52952. Number of active connections: 0
2020-12-03 07:19:53,608 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,609 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,609 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@5ef5c734
2020-12-03 07:19:53,609 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@5ef5c734
2020-12-03 07:19:53,609 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,610 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,611 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@1efe439d
2020-12-03 07:19:53,611 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,612 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,612 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,613 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52956; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,614 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,614 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,615 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52956
2020-12-03 07:19:53,615 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52956 Wrote 194 bytes.
2020-12-03 07:19:53,616 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,616 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,617 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,617 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,617 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,617 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,618 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"x1xVVwurslrpwqWfxvFXCC8hlKPYjFevskPAyl5n\",nc=00000001,cnonce=\"qiCC86lot54nY+23ELnIRzdmoT/N0XGcpwO4g6vJ\",digest-uri=\"/default\",maxbuf=65536,response=0ba4100d9c0a2fa76de6e74a45fee9af,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,618 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,618 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,619 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,619 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,619 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,620 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,620 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,620 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,620 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52956
2020-12-03 07:19:53,620 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52956 Wrote 64 bytes.
2020-12-03 07:19:53,621 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,622 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,622 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #81 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,624 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,625 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,625 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #81
2020-12-03 07:19:53,625 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#81 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52956 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,625 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,626 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,626 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#81 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52956
2020-12-03 07:19:53,626 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#81 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52956 Wrote 43 bytes.
2020-12-03 07:19:53,627 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #81
2020-12-03 07:19:53,627 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@1efe439d
2020-12-03 07:19:53,627 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52956. Number of active connections: 0
2020-12-03 07:19:53,627 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@1efe439d
2020-12-03 07:19:53,627 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,627 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@1efe439d
2020-12-03 07:19:53,627 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,627 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,628 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,629 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4ff8d125
2020-12-03 07:19:53,630 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,630 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,630 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52960; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,630 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,633 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,634 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,634 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52960
2020-12-03 07:19:53,634 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52960 Wrote 194 bytes.
2020-12-03 07:19:53,634 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,635 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,635 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,635 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,636 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,636 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,637 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"2E+/zE5/gaq2gcF3cbRbwhvxvZyfTutnSq2D//ms\",nc=00000001,cnonce=\"P9AQFpeWgpVbgvOHHb8PSs54mfmzBDRZ/kO9/hcT\",digest-uri=\"/default\",maxbuf=65536,response=3c37bb501c99617a9cebe59a57c0aa81,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,637 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,637 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,638 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,638 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,638 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,638 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,639 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,639 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,639 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52960
2020-12-03 07:19:53,639 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52960 Wrote 64 bytes.
2020-12-03 07:19:53,639 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,640 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,640 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #82 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,641 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,641 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,641 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #82
2020-12-03 07:19:53,643 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#82 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52960 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,643 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,643 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,644 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#82 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52960
2020-12-03 07:19:53,644 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#82 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52960 Wrote 43 bytes.
2020-12-03 07:19:53,644 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #82
2020-12-03 07:19:53,645 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,645 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52960. Number of active connections: 0
2020-12-03 07:19:53,645 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,645 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4ff8d125
2020-12-03 07:19:53,646 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4ff8d125
2020-12-03 07:19:53,646 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4ff8d125
2020-12-03 07:19:53,646 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,647 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,648 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@49c66ade
2020-12-03 07:19:53,649 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,649 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,650 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52964; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,650 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,650 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,650 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,651 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52964
2020-12-03 07:19:53,651 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52964 Wrote 194 bytes.
2020-12-03 07:19:53,651 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,651 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,652 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,652 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,652 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,652 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,653 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"+CgwWDHz5kbvRn8KBNsArnrpZhtxpggYv6SjAukm\",nc=00000001,cnonce=\"zWaX5rtrvZJ2Ss2X9IZrxMxByBKHv93mS97ECBk2\",digest-uri=\"/default\",maxbuf=65536,response=b6a30e06819525c6e73c675c93fb3b72,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,653 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,653 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,654 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,654 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,654 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,654 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,655 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,655 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,655 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52964
2020-12-03 07:19:53,655 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52964 Wrote 64 bytes.
2020-12-03 07:19:53,655 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,656 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,657 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #83 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,658 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,658 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,658 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #83
2020-12-03 07:19:53,658 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#83 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52964 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,659 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,659 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,660 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#83 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52964
2020-12-03 07:19:53,660 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#83 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52964 Wrote 43 bytes.
2020-12-03 07:19:53,660 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #83
2020-12-03 07:19:53,660 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@49c66ade
2020-12-03 07:19:53,660 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52964. Number of active connections: 0
2020-12-03 07:19:53,660 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,660 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@49c66ade
2020-12-03 07:19:53,661 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,661 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@49c66ade
2020-12-03 07:19:53,661 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,662 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,663 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@2421cc4
2020-12-03 07:19:53,664 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,664 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,665 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,666 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52968; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,667 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,667 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,667 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52968
2020-12-03 07:19:53,667 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52968 Wrote 194 bytes.
2020-12-03 07:19:53,668 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,668 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,668 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,669 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,669 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,669 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,670 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"pUVdoTH4iFwiSb8Mv8mzaIkyiW0BRM5JrobjR3Sp\",nc=00000001,cnonce=\"7kar4XAzVPT8wpac+egIfbW2Pb8z4xNgs+zOvIAn\",digest-uri=\"/default\",maxbuf=65536,response=0e3e6d562c195be892e19e8e90b4a81b,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,670 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,670 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,671 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,671 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,671 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,671 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,672 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,672 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,672 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52968
2020-12-03 07:19:53,672 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52968 Wrote 64 bytes.
2020-12-03 07:19:53,673 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,674 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,675 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #84 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,693 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,694 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,694 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #84
2020-12-03 07:19:53,695 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#84 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52968 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,696 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,696 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,700 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#84 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52968
2020-12-03 07:19:53,700 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#84 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52968 Wrote 43 bytes.
2020-12-03 07:19:53,700 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #84
2020-12-03 07:19:53,701 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,701 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@2421cc4
2020-12-03 07:19:53,701 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@2421cc4
2020-12-03 07:19:53,701 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@2421cc4
2020-12-03 07:19:53,701 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,702 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:53,703 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@62010f5c
2020-12-03 07:19:53,704 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,704 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,704 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52972; # active connections: 2; # queued calls: 0
2020-12-03 07:19:53,701 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,705 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52968. Number of active connections: 1
2020-12-03 07:19:53,705 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,708 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,709 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,709 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52972
2020-12-03 07:19:53,709 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52972 Wrote 194 bytes.
2020-12-03 07:19:53,711 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,711 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,712 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,712 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,713 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,713 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,714 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"GP44SQzwSZMirnKUZ4Apq7Q6xtIEXkeBoeD39mQn\",nc=00000001,cnonce=\"xrJEU4StVANEIG8GX5H75PTSvriGq67FqqBiyntJ\",digest-uri=\"/default\",maxbuf=65536,response=3e98c818532ae639e1f6cddc23904086,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,714 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,715 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,715 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,716 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,716 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,716 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,717 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,717 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,717 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52972
2020-12-03 07:19:53,717 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52972 Wrote 64 bytes.
2020-12-03 07:19:53,718 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,728 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,729 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #85 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,730 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,731 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,731 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #85
2020-12-03 07:19:53,731 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#85 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52972 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,732 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,732 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,733 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#85 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52972
2020-12-03 07:19:53,733 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#85 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52972 Wrote 43 bytes.
2020-12-03 07:19:53,733 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #85
2020-12-03 07:19:53,737 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,737 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@62010f5c
2020-12-03 07:19:53,737 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52972. Number of active connections: 0
2020-12-03 07:19:53,737 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@62010f5c
2020-12-03 07:19:53,738 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@62010f5c
2020-12-03 07:19:53,738 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,739 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,737 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,740 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@6cc558c6
2020-12-03 07:19:53,741 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,741 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,741 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52978; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,742 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,742 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,742 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,743 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52978
2020-12-03 07:19:53,743 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52978 Wrote 194 bytes.
2020-12-03 07:19:53,743 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,743 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,744 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,744 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,744 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,745 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,745 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"9IKwuRRDlod0C3LmLY5JAzLAml4ohJfdZpShBbnS\",nc=00000001,cnonce=\"qvbFG8NbfdYBYcIP1h0rJ51PRlu3GHtuo1jXh6Vf\",digest-uri=\"/default\",maxbuf=65536,response=6171bb1598e348275fe5366f72342947,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,745 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,746 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,746 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,746 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,747 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,747 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,747 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,747 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,747 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52978
2020-12-03 07:19:53,748 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52978 Wrote 64 bytes.
2020-12-03 07:19:53,748 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,749 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,751 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #86 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,751 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,751 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,752 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #86
2020-12-03 07:19:53,752 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#86 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52978 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,752 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,753 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,754 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#86 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52978
2020-12-03 07:19:53,754 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#86 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52978 Wrote 43 bytes.
2020-12-03 07:19:53,757 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #86
2020-12-03 07:19:53,758 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,758 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52978. Number of active connections: 0
2020-12-03 07:19:53,758 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,758 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@6cc558c6
2020-12-03 07:19:53,761 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@6cc558c6
2020-12-03 07:19:53,761 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@6cc558c6
2020-12-03 07:19:53,761 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,762 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,763 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@492691d7
2020-12-03 07:19:53,764 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,764 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,764 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52980; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,765 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,765 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,765 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,766 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52980
2020-12-03 07:19:53,766 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52980 Wrote 194 bytes.
2020-12-03 07:19:53,766 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,766 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,767 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,767 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,767 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,767 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,768 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"y3KLzvAalTsCt4rAbdywpVm0B5BQBW5NJHzsHPts\",nc=00000001,cnonce=\"CJcJ3U/iu+VMhy5QcgSSBoOBDwkLQPhYQBDB9cAW\",digest-uri=\"/default\",maxbuf=65536,response=d138172f91ae3f025d2ffae1b909e137,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,768 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,768 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,769 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,769 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,769 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,769 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,770 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,770 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,770 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52980
2020-12-03 07:19:53,770 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52980 Wrote 64 bytes.
2020-12-03 07:19:53,770 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,771 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,771 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #87 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,772 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,772 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,772 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #87
2020-12-03 07:19:53,772 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#87 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52980 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,773 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,773 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,774 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#87 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52980
2020-12-03 07:19:53,774 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#87 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52980 Wrote 43 bytes.
2020-12-03 07:19:53,774 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #87
2020-12-03 07:19:53,774 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@492691d7
2020-12-03 07:19:53,774 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52980. Number of active connections: 0
2020-12-03 07:19:53,774 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,774 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@492691d7
2020-12-03 07:19:53,775 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,775 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@492691d7
2020-12-03 07:19:53,775 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,776 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,777 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4716be8b
2020-12-03 07:19:53,777 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,778 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,778 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52982; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,778 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,779 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,779 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,779 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52982
2020-12-03 07:19:53,780 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52982 Wrote 194 bytes.
2020-12-03 07:19:53,780 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,780 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,780 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,781 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,781 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,781 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,782 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"TkwWoPyt6yz7Pi16PpK8n6ZXyaXhJNg0wl0J5b5J\",nc=00000001,cnonce=\"5OPW2eugC3Ab/VlNaLp8+fx444H34LOezOEtq2fS\",digest-uri=\"/default\",maxbuf=65536,response=261b000da4d2fb06f693e98ef683bed8,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,782 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,782 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,783 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,783 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,783 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,783 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,783 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,784 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,784 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52982
2020-12-03 07:19:53,784 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52982 Wrote 64 bytes.
2020-12-03 07:19:53,788 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,792 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,792 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #88 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,796 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,796 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,797 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #88
2020-12-03 07:19:53,797 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#88 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52982 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,797 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,798 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,799 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#88 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52982
2020-12-03 07:19:53,799 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#88 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52982 Wrote 43 bytes.
2020-12-03 07:19:53,799 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #88
2020-12-03 07:19:53,799 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,799 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,799 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52982. Number of active connections: 0
2020-12-03 07:19:53,803 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4716be8b
2020-12-03 07:19:53,804 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4716be8b
2020-12-03 07:19:53,804 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4716be8b
2020-12-03 07:19:53,804 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,805 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,806 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@5505ae1a
2020-12-03 07:19:53,806 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,806 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,807 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52984; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,807 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,807 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,808 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,808 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52984
2020-12-03 07:19:53,808 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52984 Wrote 194 bytes.
2020-12-03 07:19:53,808 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,809 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,809 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,809 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,809 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,809 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,810 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"cR/yvM677q0L7AqcSP6fEFM8PQLTZgRQNcljOPvv\",nc=00000001,cnonce=\"Zh4duyxWiqXjP0aCMjP/xWnt8UgXuPz0ctU2tQ4X\",digest-uri=\"/default\",maxbuf=65536,response=66f930fc46fcd240dcf262813721ed20,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,810 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,810 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,811 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,811 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,812 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,812 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,812 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,812 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,812 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52984
2020-12-03 07:19:53,812 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52984 Wrote 64 bytes.
2020-12-03 07:19:53,813 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,814 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,814 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #89 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,820 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,820 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,821 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #89
2020-12-03 07:19:53,821 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 4 on default port 37295: Call#89 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52984 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,821 [IPC Server handler 4 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,822 [IPC Server handler 4 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,822 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 4 on default port 37295: responding to Call#89 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52984
2020-12-03 07:19:53,823 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 4 on default port 37295: responding to Call#89 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52984 Wrote 43 bytes.
2020-12-03 07:19:53,823 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #89
2020-12-03 07:19:53,823 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,823 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@5505ae1a
2020-12-03 07:19:53,823 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@5505ae1a
2020-12-03 07:19:53,824 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@5505ae1a
2020-12-03 07:19:53,824 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,824 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:164
2020-12-03 07:19:53,826 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@1800a575
2020-12-03 07:19:53,826 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,826 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,823 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52984. Number of active connections: 0
2020-12-03 07:19:53,827 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52986; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,823 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,827 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,832 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,832 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,833 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52986
2020-12-03 07:19:53,833 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52986 Wrote 194 bytes.
2020-12-03 07:19:53,833 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,834 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,834 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,834 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,835 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,835 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,836 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"lOL3qTXwp2/xDCnrBzRRrHX1JdwW1XgISo9eg1gZ\",nc=00000001,cnonce=\"rkwKod1i2hkngliSx5Mbea9FfLXzoidxpx9LYR1v\",digest-uri=\"/default\",maxbuf=65536,response=2e4cb5a0d5b97dfc5d31b4d1a4363d19,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,840 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,840 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,841 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,841 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,842 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,842 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,842 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,842 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,842 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52986
2020-12-03 07:19:53,843 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52986 Wrote 64 bytes.
2020-12-03 07:19:53,843 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,844 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,848 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #90 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,855 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,856 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,856 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #90
2020-12-03 07:19:53,859 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 0 on default port 37295: Call#90 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52986 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,859 [IPC Server handler 0 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,860 [IPC Server handler 0 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,861 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 0 on default port 37295: responding to Call#90 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52986
2020-12-03 07:19:53,861 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 0 on default port 37295: responding to Call#90 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52986 Wrote 43 bytes.
2020-12-03 07:19:53,861 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #90
2020-12-03 07:19:53,861 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,861 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52986. Number of active connections: 0
2020-12-03 07:19:53,861 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,868 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@1800a575
2020-12-03 07:19:53,868 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@1800a575
2020-12-03 07:19:53,868 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@1800a575
2020-12-03 07:19:53,868 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,869 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,870 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@3abada5a
2020-12-03 07:19:53,870 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,871 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,872 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52990; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,872 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,872 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,872 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,873 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52990
2020-12-03 07:19:53,873 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52990 Wrote 194 bytes.
2020-12-03 07:19:53,873 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,873 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,874 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,874 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,874 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,874 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,875 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"Gk7xbdEQssfQotMrogUvGJGLnZxJ8g2M3a4quh49\",nc=00000001,cnonce=\"u7znOl0hTzq7fspO0J1Oxyr2FkXwN4zHP8T8ANf/\",digest-uri=\"/default\",maxbuf=65536,response=764b7de3ce70a31b9579760fc0acab84,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,875 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,876 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,876 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,877 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,877 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,877 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,877 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,877 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,877 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52990
2020-12-03 07:19:53,878 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52990 Wrote 64 bytes.
2020-12-03 07:19:53,880 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,884 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,884 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #91 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,885 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,886 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,886 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #91
2020-12-03 07:19:53,886 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 1 on default port 37295: Call#91 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52990 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,887 [IPC Server handler 1 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,887 [IPC Server handler 1 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,888 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 1 on default port 37295: responding to Call#91 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52990
2020-12-03 07:19:53,888 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 1 on default port 37295: responding to Call#91 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52990 Wrote 43 bytes.
2020-12-03 07:19:53,888 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #91
2020-12-03 07:19:53,889 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@3abada5a
2020-12-03 07:19:53,889 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52990. Number of active connections: 0
2020-12-03 07:19:53,889 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,889 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,889 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@3abada5a
2020-12-03 07:19:53,889 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@3abada5a
2020-12-03 07:19:53,889 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,890 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,892 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@4b41dd5c
2020-12-03 07:19:53,892 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,893 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,893 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:52996; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,893 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,894 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,894 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,895 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52996
2020-12-03 07:19:53,895 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52996 Wrote 194 bytes.
2020-12-03 07:19:53,895 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,895 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,896 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,896 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,896 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,897 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,897 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"7xoofKDAhg+19+PQpGeak22DLMnxkV3A83WiTOFq\",nc=00000001,cnonce=\"tlasO+9majMriH+8gR32EtmMgaSCT8QNmkWhe2CM\",digest-uri=\"/default\",maxbuf=65536,response=b9c9db0326cf3412a6a6d7f72767b4bb,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,898 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,898 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,899 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,899 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,900 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,900 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,901 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,901 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,901 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52996
2020-12-03 07:19:53,901 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:52996 Wrote 64 bytes.
2020-12-03 07:19:53,902 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,902 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,903 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #92 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,905 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,906 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,906 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #92
2020-12-03 07:19:53,906 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 3 on default port 37295: Call#92 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52996 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,906 [IPC Server handler 3 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,907 [IPC Server handler 3 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,909 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 3 on default port 37295: responding to Call#92 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52996
2020-12-03 07:19:53,910 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 3 on default port 37295: responding to Call#92 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:52996 Wrote 43 bytes.
2020-12-03 07:19:53,910 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #92
2020-12-03 07:19:53,910 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@4b41dd5c
2020-12-03 07:19:53,910 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:52996. Number of active connections: 0
2020-12-03 07:19:53,910 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@4b41dd5c
2020-12-03 07:19:53,910 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,911 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@4b41dd5c
2020-12-03 07:19:53,911 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,911 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,911 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,912 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:getClient(63)) - getting client out of cache: org.apache.hadoop.ipc.Client@66c92293
2020-12-03 07:19:53,913 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:<init>(497)) - The ping interval is 60000 ms.
2020-12-03 07:19:53,913 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(795)) - Connecting to /127.0.0.1:37295
2020-12-03 07:19:53,913 [IPC Server listener on 0] DEBUG ipc.Server (Server.java:register(3727)) - Server connection from 127.0.0.1:53000; # active connections: 1; # queued calls: 0
2020-12-03 07:19:53,914 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: NEGOTIATE

2020-12-03 07:19:53,914 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,914 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:create(175)) - Created SASL server with mechanism = DIGEST-MD5
2020-12-03 07:19:53,915 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:53000
2020-12-03 07:19:53,915 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:53000 Wrote 194 bytes.
2020-12-03 07:19:53,920 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:getServerToken(268)) - Get token info proto:interface org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolPB info:@org.apache.hadoop.security.token.TokenInfo(value=class org.apache.hadoop.hdfs.security.token.block.BlockTokenSelector)
2020-12-03 07:19:53,920 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:createSaslClient(251)) - Creating SASL DIGEST-MD5(TOKEN)  client to authenticate to service at default
2020-12-03 07:19:53,921 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:selectSaslClient(177)) - Use TOKEN authentication for protocol ClientDatanodeProtocolPB
2020-12-03 07:19:53,921 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(678)) - SASL client callback: setting username: igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=
2020-12-03 07:19:53,921 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(683)) - SASL client callback: setting userPassword
2020-12-03 07:19:53,921 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:handle(688)) - SASL client callback: setting realm: default
2020-12-03 07:19:53,922 [Listener at 0.0.0.0/37295] DEBUG security.SaslRpcClient (SaslRpcClient.java:sendSaslMessage(451)) - Sending sasl message state: INITIATE
token: "charset=utf-8,username=\"igF2J3qIrY0KP4oAAAAEcm9vdAAAAAMtMTCUBARSRUFEBVdSSVRFBENPUFkHUkVQTEFDRQEERElTSwA=\",realm=\"default\",nonce=\"41R1RncUPbslisNHM2YkEEmNbqUU9EA+qo0lzO99\",nc=00000001,cnonce=\"VNseGBwfvHEVVXvFkZI7U6iWStXFpRyWoT2oVMUM\",digest-uri=\"/default\",maxbuf=65536,response=48bda302add02f28b0a095b5ee18e432,qop=auth"
auths {
  method: "TOKEN"
  mechanism: "DIGEST-MD5"
  protocol: ""
  serverId: "default"
}

2020-12-03 07:19:53,922 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-33
2020-12-03 07:19:53,923 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processSaslToken(2112)) - Have read input token of size 318 for processing by saslServer.evaluateResponse()
2020-12-03 07:19:53,923 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(310)) - SASL server DIGEST-MD5 callback: setting password for client: root (auth:SIMPLE)
2020-12-03 07:19:53,924 [Socket Reader #1 for port 0] DEBUG security.SaslRpcServer (SaslRpcServer.java:handle(328)) - SASL server DIGEST-MD5 callback: setting canonicalized client ID: root
2020-12-03 07:19:53,924 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:buildSaslResponse(2129)) - Will send SUCCESS token of size 40 from saslServer.
2020-12-03 07:19:53,924 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2000)) - SASL server context established. Negotiated QoP is auth
2020-12-03 07:19:53,924 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:saslProcess(2005)) - SASL server successfully authenticated client: root (auth:SIMPLE)
2020-12-03 07:19:53,924 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:saslProcess(2008)) - Auth successful for root (auth:SIMPLE)
2020-12-03 07:19:53,925 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1615)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:53000
2020-12-03 07:19:53,925 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processResponse(1634)) - Socket Reader #1 for port 0: responding to Call#-33 Retry#-1 null from 127.0.0.1:53000 Wrote 64 bytes.
2020-12-03 07:19:53,925 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:setupIOstreams(837)) - Negotiated QOP is :auth
2020-12-03 07:19:53,926 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1074)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: starting, having connections 1
2020-12-03 07:19:53,927 [IPC Parameter Sending Thread #0] DEBUG ipc.Client (Client.java:run(1137)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 sending #93 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength
2020-12-03 07:19:53,928 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #-3
2020-12-03 07:19:53,928 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:authorizeConnection(2750)) - Successfully authorized userInfo {
}
protocol: "org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol"

2020-12-03 07:19:53,928 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:processOneRpc(2521)) -  got #93
2020-12-03 07:19:53,932 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2902)) - IPC Server handler 2 on default port 37295: Call#93 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:53000 for RpcKind RPC_PROTOCOL_BUFFER
2020-12-03 07:19:53,932 [IPC Server handler 2 on default port 37295] INFO  ipc.Server (ProtobufRpcEngine.java:call(505)) - Call: connectionProtocolName=org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol, method=getReplicaVisibleLength
2020-12-03 07:19:53,932 [IPC Server handler 2 on default port 37295] INFO  block.TestBlockToken (TestBlockToken.java:answer(151)) - Got: block_token_identifier (expiryDate=1606980110509, keyId=671626, userId=root, blockPoolId=-10, blockId=-108, access modes=[READ, WRITE, COPY, REPLACE], storageTypes= [DISK], storageIds= [])
2020-12-03 07:19:53,933 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1615)) - IPC Server handler 2 on default port 37295: responding to Call#93 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:53000
2020-12-03 07:19:53,933 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:processResponse(1634)) - IPC Server handler 2 on default port 37295: responding to Call#93 Retry#0 org.apache.hadoop.hdfs.protocol.ClientDatanodeProtocol.getReplicaVisibleLength from 127.0.0.1:53000 Wrote 43 bytes.
2020-12-03 07:19:53,933 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:receiveRpcResponse(1191)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0 got value #93
2020-12-03 07:19:53,934 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@66c92293
2020-12-03 07:19:53,934 [Socket Reader #1 for port 0] DEBUG ipc.Server (Server.java:close(3738)) - Socket Reader #1 for port 0: disconnecting client 127.0.0.1:53000. Number of active connections: 0
2020-12-03 07:19:53,934 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:close(1283)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: closed
2020-12-03 07:19:53,934 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@66c92293
2020-12-03 07:19:53,937 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@66c92293
2020-12-03 07:19:53,937 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,937 [IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0] DEBUG ipc.Client (Client.java:run(1092)) - IPC Client (875917495) connection to /127.0.0.1:37295 from blk_12345_0: stopped, remaining connections 0
2020-12-03 07:19:53,938 [Listener at 0.0.0.0/37295] INFO  block.TestBlockToken (TestBlockToken.java:testBlockTokenRpcLeak(407)) - Num open fds:163
2020-12-03 07:19:53,939 [Listener at 0.0.0.0/37295] INFO  ipc.Server (Server.java:stop(3359)) - Stopping server on 37295
2020-12-03 07:19:53,939 [IPC Server handler 1 on default port 37295] DEBUG ipc.Server (Server.java:run(2946)) - IPC Server handler 1 on default port 37295: exiting
2020-12-03 07:19:53,940 [IPC Server handler 3 on default port 37295] DEBUG ipc.Server (Server.java:run(2946)) - IPC Server handler 3 on default port 37295: exiting
2020-12-03 07:19:53,940 [IPC Server handler 4 on default port 37295] DEBUG ipc.Server (Server.java:run(2946)) - IPC Server handler 4 on default port 37295: exiting
2020-12-03 07:19:53,940 [IPC Server listener on 0] INFO  ipc.Server (Server.java:run(1330)) - Stopping IPC Server listener on 0
2020-12-03 07:19:53,940 [IPC Server handler 2 on default port 37295] DEBUG ipc.Server (Server.java:run(2946)) - IPC Server handler 2 on default port 37295: exiting
2020-12-03 07:19:53,940 [IPC Server handler 0 on default port 37295] DEBUG ipc.Server (Server.java:run(2946)) - IPC Server handler 0 on default port 37295: exiting
2020-12-03 07:19:53,940 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(97)) - stopping client from cache: org.apache.hadoop.ipc.Client@1bb266b3
2020-12-03 07:19:53,941 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(103)) - removing client from cache: org.apache.hadoop.ipc.Client@1bb266b3
2020-12-03 07:19:53,941 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (ClientCache.java:stopClient(110)) - stopping actual client because no more references remain: org.apache.hadoop.ipc.Client@1bb266b3
2020-12-03 07:19:53,941 [Listener at 0.0.0.0/37295] DEBUG ipc.Client (Client.java:stop(1340)) - Stopping client
2020-12-03 07:19:53,940 [IPC Server Responder] DEBUG ipc.Server (Server.java:doRunLoop(1513)) - Checking for old call responses.
2020-12-03 07:19:53,941 [IPC Server Responder] INFO  ipc.Server (Server.java:run(1465)) - Stopping IPC Server Responder
msx-rc 0
